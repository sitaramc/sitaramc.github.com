<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>normal ssh mode install and setup - Gitolite</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">
        <link href="css/gitolite.css" rel="stylesheet">

        <script src="js/jquery-1.10.2.min.js" defer></script>
        <script src="js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="index.html">Gitolite</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="index.html" class="nav-link">home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">what/why <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="overview.html" class="dropdown-item">overview</a>
</li>
                                    
<li>
    <a href="concepts.html" class="dropdown-item">concepts, conventions, terminology</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">install and setup <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="quick_install.html" class="dropdown-item">(unix/ssh experts) quick install and setup</a>
</li>
                                    
<li>
    <a href="install.html" class="dropdown-item active">normal ssh mode install and setup</a>
</li>
                                    
<li>
    <a href="fool_proof_setup.html" class="dropdown-item">(if all else fails) fool-proof, step-by-step, install and setup</a>
</li>
                                    
<li>
    <a href="http.html" class="dropdown-item">HTTP mode install</a>
</li>
                                    
<li>
    <a href="migr.html" class="dropdown-item">migrating from v2</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">use <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">basic</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="basic-admin.html" class="dropdown-item">basic administration</a>
</li>
            
<li>
    <a href="conf.html" class="dropdown-item">the "conf" file (part 1)</a>
</li>
            
<li>
    <a href="conf-2.html" class="dropdown-item">the "conf" file (part 2)</a>
</li>
            
<li>
    <a href="rc.html" class="dropdown-item">the "rc" file</a>
</li>
            
<li>
    <a href="user.html" class="dropdown-item">your users' view</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">advanced</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="git-config.html" class="dropdown-item">setting git-config values</a>
</li>
            
<li>
    <a href="options.html" class="dropdown-item">gitolite options</a>
</li>
            
<li>
    <a href="wild.html" class="dropdown-item">ad hoc user-created ("wild") repos</a>
</li>
            
<li>
    <a href="templates.html" class="dropdown-item">using templates</a>
</li>
            
<li>
    <a href="vref.html" class="dropdown-item">virtual refs (part 1)</a>
</li>
            
<li>
    <a href="vref-2.html" class="dropdown-item">virtual refs (part 2)</a>
</li>
            
<li>
    <a href="deleg.html" class="dropdown-item">delegation of admin duties</a>
</li>
            
<li>
    <a href="gitweb-daemon.html" class="dropdown-item">gitweb and git-daemon</a>
</li>
            
<li>
    <a href="mirroring.html" class="dropdown-item">mirroring</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">customise</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="non-core.html" class="dropdown-item">core and "non-core" gitolite</a>
</li>
            
<li>
    <a href="dev-notes.html" class="dropdown-item">writing your own non-core code</a>
</li>
            
<li>
    <a href="triggers.html" class="dropdown-item">gitolite triggers</a>
</li>
            
<li>
    <a href="list-non-core.html" class="dropdown-item">list of non-core programs shipped with gitolite</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="cookbook.html" class="dropdown-item">(quick! how do I...) the cookbook</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">HELP! <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="emergencies.html" class="dropdown-item">emergency!!</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">ssh</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="ssh.html" class="dropdown-item">ssh</a>
</li>
            
<li>
    <a href="glssh.html" class="dropdown-item">how gitolite uses ssh</a>
</li>
            
<li>
    <a href="sts.html" class="dropdown-item">ssh troubleshooting</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="regex.html" class="dropdown-item">regular expressions</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">other docs <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="odds-and-ends.html" class="dropdown-item">miscellaneous features</a>
</li>
                                    
<li>
    <a href="namespaces.html" class="dropdown-item">using git namespaces</a>
</li>
                                    
<li>
    <a href="locking.html" class="dropdown-item">locking binary files</a>
</li>
                                    
<li>
    <a href="testing.html" class="dropdown-item">testing gitolite</a>
</li>
                                    
<li>
    <a href="package.html" class="dropdown-item">packaging gitolite</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">more about gitolite</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="files.html" class="dropdown-item">gitolite files & directories</a>
</li>
            
<li>
    <a href="rc-33.html" class="dropdown-item">the 3.3 format rc file</a>
</li>
            
<li>
    <a href="perf.html" class="dropdown-item">performance</a>
</li>
            
<li>
    <a href="internals.html" class="dropdown-item">internals</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">contrib</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="contrib/ssh-and-http.html" class="dropdown-item">Using both ssh and http</a>
</li>
            
<li>
    <a href="contrib/putty.html" class="dropdown-item">Putty and Msysgit</a>
</li>
            
<li>
    <a href="contrib/sskm.html" class="dropdown-item">Self-service key management</a>
</li>
            
<li>
    <a href="contrib/ukm.html" class="dropdown-item">User key management</a>
</li>
            
<li>
    <a href="contrib/README-emacs.html" class="dropdown-item">Emacs major mode</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="no-way.html" class="dropdown-item">no way!</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="quick_install.html" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="fool_proof_setup.html" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#install-and-setup" class="nav-link">install and setup</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#before-you-start-pre-requisites" class="nav-link">before you start... (pre-requisites)</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#your-skills" class="nav-link">your skills</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#your-server" class="nav-link">your server</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#you-and-your-users-clients" class="nav-link">you and your users' clients</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#cautions-and-caveats" class="nav-link">cautions and caveats</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#trying-out-gitolite-safely" class="nav-link">trying out gitolite safely</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#install-and-setup_1" class="nav-link">install and setup</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#a-graphical-overview" class="nav-link">(a graphical overview)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#prepare-for-the-install" class="nav-link">prepare for the install</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#get-the-software" class="nav-link">get the software</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#install" class="nav-link">install</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#setup" class="nav-link">setup</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#upgrades" class="nav-link">upgrades</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#moving-servers" class="nav-link">moving servers</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="install-and-setup">install and setup<a class="headerlink" href="#install-and-setup" title="Permanent link"></a></h1>
<div class="admonition danger">
<p class="admonition-title">IMPORTANT</p>
<p>Almost nothing in gitolite requires <code>root</code> (with some obvious exceptions).
Unless the documentation says "do this from <code>root</code>", assume it is to be
done from the <a href="concepts#the-hosting-user">hosting user</a> account.</p>
</div>
<hr />
<div class="admonition danger">
<p>This page is about an ssh mode installation.  It should work for most
people, but if you are an absolute newbie to Unix etc., you may want to
click <a href="fool_proof_setup">here</a> for a very detailed, step-by-step,
hopefully fool-proof set of instructions.</p>
<p>If ssh is not your thing, there's a different page for <a href="http">http mode</a>
installation.</p>
</div>
<h1 id="before-you-start-pre-requisites">before you start... (pre-requisites)<a class="headerlink" href="#before-you-start-pre-requisites" title="Permanent link"></a></h1>
<h2 id="your-skills">your skills<a class="headerlink" href="#your-skills" title="Permanent link"></a></h2>
<ul>
<li>
<p>Please DO read the <a href="concepts">concepts and terminology</a> page before doing
    anything here.</p>
</li>
<li>
<p>If you're installing gitolite, you're a "system admin", like it or not.
    Since most people use the ssh mode, <strong><a href="ssh">ssh</a></strong> is therefore a necessary
    skill.  Please take the time to learn at least enough to get passwordless
    access working.</p>
</li>
<li>
<p>You also need to be somewhat familiar with git itself.  You cannot
    administer a whole bunch of git repositories if you don't know the basics
    of git.</p>
<p>Please make sure you understand at least the following concepts: <em>bare
versus non-bare repos, cloning a repo, making changes and committing them,
pushing commits to a 'remote', the special remote called 'origin',
difference between a fast-forward push and a rewind push, 'refs' (i.e.,
branches and tags)</em>.</p>
<p>It also helps to understand git's hooks mechanism, git-config, and so on.</p>
</li>
<li>
<p>Some familiarity with Unix and shells is probably required.</p>
</li>
<li>
<p><a href="regex">Regular expressions</a> are a big part of gitolite in many places but
    familiarity is not necessary to do <em>basic</em> access control.</p>
</li>
</ul>
<h2 id="your-server">your server<a class="headerlink" href="#your-server" title="Permanent link"></a></h2>
<ul>
<li>Any Unix system with a posix compatible "sh" and a <strong>sane</strong> file system.</li>
<li>Git version 1.6.6 or later.</li>
<li>Perl 5.8.8 or later (see <a href="https://lwn.net/Articles/348084/">https://lwn.net/Articles/348084/</a> if this does
    not seem to be enough).</li>
<li>
<p>Openssh (almost any version).  Optional if you're using <a href="http">smart http</a>.</p>
<ul>
<li><strong>IMPORTANT</strong>: although a default openssh config will not do this (AFAIK),
    <strong>do not</strong> allow the user to set environment variables if you care about
    security at all.</li>
</ul>
</li>
<li>
<p>A dedicated Unix userid to be the hosting user, usually "git" but it can
    be any user, even your own normal one.  (If you're using an RPM/DEB the
    install probably created one called "gitolite").</p>
</li>
</ul>
<h2 id="you-and-your-users-clients">you and your users' clients<a class="headerlink" href="#you-and-your-users-clients" title="Permanent link"></a></h2>
<ul>
<li>Openssh client.</li>
<li>Git 1.6.6 or later.  Almost any git client will work, as long as it knows
    how to use ssh keys and send the right one along.</li>
</ul>
<h2 id="cautions-and-caveats">cautions and caveats<a class="headerlink" href="#cautions-and-caveats" title="Permanent link"></a></h2>
<p><strong>Please take note of the following points</strong>:</p>
<ul>
<li>
<p>If you're bringing existing repos into gitolite, please see
    <a href="basic-admin#appendix-1-bringing-existing-repos-into-gitolite">this</a> first.</p>
</li>
<li>
<p>Gitolite expects all the directories and files it manages/uses to be owned
    by the <a href="concepts#the-hosting-user">hosting user</a> and not have strange permissions and ownerships.</p>
</li>
<li>
<p>Gitolite does NOT like it if you fiddle with <a href="files">files and directories it cares about</a> in any way except as directed in the documentation.</p>
</li>
<li>
<p>Gitolite depends on several system-installed packages: openssh, git, perl,
    sh being the main ones.  They should all be configured sensibly and with
    most of the normal defaults.  (For example, if your sshd config says the
    authorized keys file should be placed in some directory other than the
    default, expect trouble).</p>
</li>
</ul>
<h1 id="trying-out-gitolite-safely">trying out gitolite safely<a class="headerlink" href="#trying-out-gitolite-safely" title="Permanent link"></a></h1>
<p>If you're not sure if gitolite is right for you or your system, it's easy to
take it for a trial run, in ssh mode, and play with all of its features
(except mirroring).  This is very safe, and does not affect anything on your
system permanently.</p>
<p><font color="red"><strong>WARNING: this will clobber <a href="testing#appendix-1-the-clobber-list-clobber">these files and
directories</a> in your <code>$HOME</code>.  Ideally, you should use a throwaway
userid</strong>.</font></p>
<p>Just create a <strong>throw-away userid</strong>, log in to it, then run these commands:</p>
<pre><code>git clone https://github.com/sitaramc/gitolite
cd gitolite
prove t/ssh*
</code></pre>
<p>You will get an error that forces you to read <code>t/README</code> and set an env var
before the test can proceed.  This is intentional; I've had people who don't
pay attention to the "data loss" warning, and then complain that it was not
prominent enough.  Forcing them to read a much smaller page appears to focus
their attention better!</p>
<p>If it doesn't work, re-read this page to see if you may have missed something
that gitolite requires, or ask for <a href="index.html#contactsupport">support</a>.</p>
<p>If it works, you get a gitolite installation with 7 gitolite users ("admin",
and "u1" through "u6").</p>
<p>Don't forget that the client and the server are all on the same user on the
same machine; we're <em>simulating</em> 7 gitolite users using ssh keys!  (How?
Maybe <code>~/.ssh/config</code> will give you a hint).</p>
<p>URLs look like <code>user:repo</code>, so for example you can clone the admin repo by
<code>git clone admin:gitolite-admin</code>.  Remote commands look like <code>ssh u1 info</code>.</p>
<p>So start by cloning the admin repo, and try out whatever you want!</p>
<h1 id="install-and-setup_1">install and setup<a class="headerlink" href="#install-and-setup_1" title="Permanent link"></a></h1>
<p>This section talks about installing the software manually (i.e., not using a
package manager) and setting it up.  The install step gets the code to where
you want it.  The setup step creates the files and directories gitolite needs,
including the special gitolite-admin repo, and makes you an administrator so
you can manage it remotely.</p>
<p>If you install gitolite using a package manager, you should check your
distro-standard mechanisms or distro-supplied documentation for how to
complete the installation.</p>
<div class="admonition danger">
<p class="admonition-title">Important:</p>
<p>On package manager installs</span>: make sure you get gitolite <strong>v3.x</strong>.
The correct package you want may be called "gitolite3", even though
"gitolite" also exists.  If you want to know what the latest gitolite
version is, the gitolite <a href="https://github.com/sitaramc/gitolite/blob/master/CHANGELOG">CHANGELOG</a> will tell you.</p>
</div>
<h2 id="a-graphical-overview">(a graphical overview)<a class="headerlink" href="#a-graphical-overview" title="Permanent link"></a></h2>
<p>Here's a graphical overview of what files/directories are affected by each
step in the install+setup process.  Alice is installing gitolite, with herself
as the administrator.</p>
<p><img alt="" src="in-1.png" /></p>
<p>The files names you see there are <strong>only for information</strong>.  You do <strong>not</strong>
have to do anything to them yourself; in fact you should not!  You only need
the command for each numbered step shown:</p>
<ol>
<li>Copy the admin's pubkey to the server as "alice.pub".</li>
<li>Run <code>git clone https://github.com/sitaramc/gitolite</code> or equivalent.</li>
<li>Run <code>gitolite/install -ln</code>.</li>
<li>Run <code>gitolite setup -pk alice.pub</code>.</li>
</ol>
<p>Note also that you only need ONE real user on the server.  In our example it
is git.  In particular, you do NOT create Unix userids for your gitolite
users.</p>
<h2 id="prepare-for-the-install">prepare for the install<a class="headerlink" href="#prepare-for-the-install" title="Permanent link"></a></h2>
<p>The simplest, most foolproof, way of ensuring that your gitolite install +
setup will succeed is to use a brand new userid as the hosting user.  If that
is not possible, make sure the following do NOT exist in that user's home
directory: <code>~/.gitolite.rc</code>, <code>~/.gitolite</code>, <code>~/repositories</code>, and
<code>~/.ssh/authorized_keys</code>.</p>
<p><span class="red">Before you go trashing that authorized keys file, please make sure you
know the password to the 'git' user, or know the root password on the
machine!</span></p>
<p><span class="gray">The authorized keys file <em>can</em> exist, actually, as long as none of the
keys you intend to use with gitolite are present in it.  But again, if you're
not an ssh guru, you should probably play safe.</span></p>
<h2 id="get-the-software">get the software<a class="headerlink" href="#get-the-software" title="Permanent link"></a></h2>
<p>Get the software using git-clone:</p>
<pre style="color: #ffffff; background-color: #000000;">
git clone <a href="https://github.com/sitaramc/gitolite">https://github.com/sitaramc/gitolite</a>
</pre>

<p>You can use this as is, or you can check out the latest tag to make sure
you're running a tagged version instead of just the current 'master'.</p>
<h2 id="install">install<a class="headerlink" href="#install" title="Permanent link"></a></h2>
<p>Gitolite has one server side command: <code>gitolite</code>.  You don't need to place it
anywhere special; in the worst case you can run it with the full path.</p>
<p>"Installation" consists of deciding where to put it:</p>
<ol>
<li>Keep the sources anywhere and use the full path to run the <code>gitolite</code>
    command.</li>
<li>Keep the sources anywhere and symlink <em>just</em> the <code>gitolite</code> program to
    some directory on your <code>$PATH</code>.</li>
<li>Copy the sources somewhere and use that path to run the <code>gitolite</code>
    command.</li>
</ol>
<p>Option 2 is the best for general use, but here's the scoop on all of them:</p>
<pre style="color: #ffffff; background-color: #000000;">
<span class="Comment"># option 1</span>
gitolite/install

<span class="Comment"># option 2</span>
gitolite/install <span class="Special">-ln</span>
<span class="Comment"># defaults to $HOME/bin (which is assumed to exist)</span>
<span class="Comment">#   ** or **</span>
<span class="Comment"># or use a specific directory (please supply FULL path):</span>
gitolite/install <span class="Special">-ln</span> /usr/local/bin

<span class="Comment"># option 3</span>
<span class="Comment"># (again, please supply a FULL path)</span>
gitolite/install <span class="Special">-to</span> /usr/local/gitolite/bin
</pre>

<p>Creating a symlink doesn't need a separate program but 'install' also runs
<code>git describe</code> to create a VERSION file, which can be very important if you
want support :-)</p>
<h2 id="setup">setup<a class="headerlink" href="#setup" title="Permanent link"></a></h2>
<p>For the first-time setup, you need to have a public key file (usually from
the admin's workstation) ready.  If the main gitolite admin's username is
"alice", this file should be named "alice.pub" and copied to the server.</p>
<p>Once that is done, run:</p>
<pre><code>gitolite setup -pk alice.pub
</code></pre>
<p>If that completes without any warnings, you are done.  If it had a warning,
you probably supplied a key which already has shell access to the server.
That won't work; you'll have to generate and use a different key pair for
gitolite access and use <a href="sts#appendix-4-ssh-host-aliases">host aliases</a> to distinguish between the two.
While you're there, read both the <a href="ssh">ssh</a> pages.  Twice.</p>
<h1 id="upgrades">upgrades<a class="headerlink" href="#upgrades" title="Permanent link"></a></h1>
<ul>
<li>Update your clone of the gitolite source.</li>
<li>Repeat the install command you used earlier (make sure you use the same
    arguments as before).</li>
<li>Run <code>gitolite setup</code>.</li>
</ul>
<p>After you upgrade gitolite, you may also want to upgrade your rc file
(<code>~/.gitolite.rc</code>).  See the <a href="rc">rc file</a> documentation for that.</p>
<h1 id="moving-servers">moving servers<a class="headerlink" href="#moving-servers" title="Permanent link"></a></h1>
<!-- XXX TODO: maybe a nice picture? -->

<p>Nothing in any of the gitolite install/setup/etc will ever touch the <em>data</em> in
any repository except the gitolite-admin repo.  The only thing it will
normally touch is the <code>update</code> hook.  So one fool-proof way of "moving"
servers is this:</p>
<ol>
<li>
<p>Clone the latest gitolite-admin repo from the old server to your
    workstation.  Make sure you have an admin key that has RW+ rights to the
    gitolite-admin repo; you will need this later.</p>
</li>
<li>
<p>Install gitolite on the new server, using the same key for the admin as
    for the old server.</p>
</li>
<li>
<p>Copy the <a href="rc">rc</a> file from the old server, overwriting this one.</p>
</li>
<li>
<p><a href="odds-and-ends#disabling-pushes-to-take-backups">Disable</a> the old server so people won't push to it.</p>
</li>
<li>
<p>Copy all the repos over from the old server.  Make sure the files end up
    with the right ownership and permissions; if not, chown/chmod them.</p>
<p>The gitolite-admin repo already exists on the new server (it's just a bare
bones conf file).  Do NOT overwrite it.  (Not because it contains anything
useful, but because the next step will then fail!)</p>
</li>
<li>
<p>Go to the clone you made in step 1, add a new remote (or change an
    existing one) to point to the new server, then <code>git push -f</code> to it.</p>
</li>
<li>
<p>Run <code>gitolite setup</code> on the server.</p>
</li>
</ol></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js" defer></script>
        <script src="search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
