<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>using templates - Gitolite</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">
        <link href="css/gitolite.css" rel="stylesheet">

        <script src="js/jquery-1.10.2.min.js" defer></script>
        <script src="js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="index.html">Gitolite</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="index.html" class="nav-link">home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">what/why <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="overview.html" class="dropdown-item">overview</a>
</li>
                                    
<li>
    <a href="concepts.html" class="dropdown-item">concepts, conventions, terminology</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">install and setup <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="quick_install.html" class="dropdown-item">(unix/ssh experts) quick install and setup</a>
</li>
                                    
<li>
    <a href="install.html" class="dropdown-item">normal ssh mode install and setup</a>
</li>
                                    
<li>
    <a href="fool_proof_setup.html" class="dropdown-item">(if all else fails) fool-proof, step-by-step, install and setup</a>
</li>
                                    
<li>
    <a href="http.html" class="dropdown-item">HTTP mode install</a>
</li>
                                    
<li>
    <a href="migr.html" class="dropdown-item">migrating from v2</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">use <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">basic</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="basic-admin.html" class="dropdown-item">basic administration</a>
</li>
            
<li>
    <a href="conf.html" class="dropdown-item">the "conf" file (part 1)</a>
</li>
            
<li>
    <a href="conf-2.html" class="dropdown-item">the "conf" file (part 2)</a>
</li>
            
<li>
    <a href="rc.html" class="dropdown-item">the "rc" file</a>
</li>
            
<li>
    <a href="user.html" class="dropdown-item">your users' view</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">advanced</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="git-config.html" class="dropdown-item">setting git-config values</a>
</li>
            
<li>
    <a href="options.html" class="dropdown-item">gitolite options</a>
</li>
            
<li>
    <a href="wild.html" class="dropdown-item">ad hoc user-created ("wild") repos</a>
</li>
            
<li>
    <a href="templates.html" class="dropdown-item active">using templates</a>
</li>
            
<li>
    <a href="vref.html" class="dropdown-item">virtual refs (part 1)</a>
</li>
            
<li>
    <a href="vref-2.html" class="dropdown-item">virtual refs (part 2)</a>
</li>
            
<li>
    <a href="deleg.html" class="dropdown-item">delegation of admin duties</a>
</li>
            
<li>
    <a href="gitweb-daemon.html" class="dropdown-item">gitweb and git-daemon</a>
</li>
            
<li>
    <a href="mirroring.html" class="dropdown-item">mirroring</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">customise</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="non-core.html" class="dropdown-item">core and "non-core" gitolite</a>
</li>
            
<li>
    <a href="dev-notes.html" class="dropdown-item">writing your own non-core code</a>
</li>
            
<li>
    <a href="triggers.html" class="dropdown-item">gitolite triggers</a>
</li>
            
<li>
    <a href="list-non-core.html" class="dropdown-item">list of non-core programs shipped with gitolite</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="cookbook.html" class="dropdown-item">(quick! how do I...) the cookbook</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">HELP! <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="emergencies.html" class="dropdown-item">emergency!!</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">ssh</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="ssh.html" class="dropdown-item">ssh</a>
</li>
            
<li>
    <a href="glssh.html" class="dropdown-item">how gitolite uses ssh</a>
</li>
            
<li>
    <a href="sts.html" class="dropdown-item">ssh troubleshooting</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="regex.html" class="dropdown-item">regular expressions</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">other docs <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="odds-and-ends.html" class="dropdown-item">miscellaneous features</a>
</li>
                                    
<li>
    <a href="namespaces.html" class="dropdown-item">using git namespaces</a>
</li>
                                    
<li>
    <a href="locking.html" class="dropdown-item">locking binary files</a>
</li>
                                    
<li>
    <a href="testing.html" class="dropdown-item">testing gitolite</a>
</li>
                                    
<li>
    <a href="package.html" class="dropdown-item">packaging gitolite</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">more about gitolite</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="files.html" class="dropdown-item">gitolite files & directories</a>
</li>
            
<li>
    <a href="rc-33.html" class="dropdown-item">the 3.3 format rc file</a>
</li>
            
<li>
    <a href="perf.html" class="dropdown-item">performance</a>
</li>
            
<li>
    <a href="internals.html" class="dropdown-item">internals</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">contrib</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="contrib/ssh-and-http.html" class="dropdown-item">Using both ssh and http</a>
</li>
            
<li>
    <a href="contrib/putty.html" class="dropdown-item">Putty and Msysgit</a>
</li>
            
<li>
    <a href="contrib/sskm.html" class="dropdown-item">Self-service key management</a>
</li>
            
<li>
    <a href="contrib/ukm.html" class="dropdown-item">User key management</a>
</li>
            
<li>
    <a href="contrib/README-emacs.html" class="dropdown-item">Emacs major mode</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="no-way.html" class="dropdown-item">no way!</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="wild.html" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="vref.html" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#setting-up-and-using-templates" class="nav-link">setting up and using templates</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#overview" class="nav-link">overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#advantages" class="nav-link">advantages</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#how-does-it-work" class="nav-link">how does it work?</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#a-repo-and-its-users" class="nav-link">a repo and its users</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#a-repo-and-its-rules" class="nav-link">a repo and its rules</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#usage-and-syntax" class="nav-link">usage and syntax</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#bypassing-gitoliteconf-for-huge-sites" class="nav-link">bypassing gitolite.conf for huge sites</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#generating-the-text-files-externally" class="nav-link">generating the text files externally</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#creating-new-repos" class="nav-link">creating new repos</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#thanks-to" class="nav-link">thanks to...</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#miscellanea" class="nav-link">miscellanea</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="setting-up-and-using-templates">setting up and using templates<a class="headerlink" href="#setting-up-and-using-templates" title="Permanent link"></a></h1>
<hr />
<p>This feature was added late September 2017, after 3.6.7.  In terms of
versioning, it will be part of 3.6.8, or you could just grab the latest from
github.</p>
<h1 id="overview">overview<a class="headerlink" href="#overview" title="Permanent link"></a></h1>
<p>This feature describes a new method of specifying gitolite rules.</p>
<p>A "template" is a set of gitolite access rules with a name.  A gitolite
"expert" can setup a suitable set of templates, and then actual repos can use
one or more of these templates, according to their need.</p>
<p>A simple example will illustrate.  It's split into two parts.</p>
<p>First, the <strong>template definitions</strong>, where the rules comprising each template
are defined:</p>
<pre style="color: #ffffff; background-color: #000000;">
<span class="Comment"># (obligatory warning: the order of the following lines matters!)</span>

<span class="Statement">repo</span> <span class="Identifier">@is_public</span>
    <span class="Statement">R</span>                           =   <span class="Identifier">@all</span>

<span class="Statement">repo</span> <span class="Identifier">@is_suspended</span>
    <span class="Statement">-</span>                           =   <span class="WarningMsg">@all</span>

<span class="Statement">repo</span> <span class="Identifier">@has_personal_refs</span>
    <span class="Statement">RW+</span>     <span class="Constant">dev</span><span class="PreProc">/USER/</span>           =   teamleads team
    <span class="Statement">-</span>       <span class="Constant">dev/</span>                =   <span class="WarningMsg">@all</span>
    <span class="Statement">RW+</span>     <span class="Constant">refs/tags/dev</span><span class="PreProc">/USER/</span> =   teamleads team
    <span class="Statement">-</span>       <span class="Constant">refs/tags/dev/</span>      =   <span class="WarningMsg">@all</span>

<span class="Statement">repo</span> <span class="Identifier">@has_releases</span>
    <span class="Statement">RW</span>      <span class="Constant">refs/tags/v[0-9]</span>    =   release_managers
    <span class="Statement">-</span>       <span class="Constant">refs/tags/v[0-9]</span>    =   <span class="WarningMsg">@all</span>

<span class="Statement">repo</span> <span class="Identifier">@base</span>
    <span class="Statement">RW+</span>                         =   teamleads
    <span class="Statement">RW</span>                          =   team
    <span class="Statement">R</span>                           =   READERS
</pre>

<p>Next, you have the <strong>template data</strong> section (i.e., the lines between the
<code>begin</code> and <code>end</code> lines you see in the example below).  This is where you
declare actual repos (<code>foo</code> and <code>bar</code> below), giving each a set of one or more
templates it will <strong>use</strong>, and map users to any roles that the template may
require.</p>
<pre style="color: #ffffff; background-color: #000000;">
<span class="PreProc">=begin template-data</span>

<span class="Statement">repo</span> foo = <span class="Constant">base is_public has_releases</span>
    <span class="Constant">teamleads           </span>=   sitaram
    <span class="Constant">team                </span>=   dilbert wally
    <span class="Constant">READERS             </span>=   ashok
    <span class="Constant">release_managers    </span>=   alice

<span class="Statement">repo</span> bar = <span class="Constant">base has_personal_refs</span>
    <span class="Constant">teamleads           </span>=   han
    <span class="Constant">team                </span>=   luke chewie

<span class="PreProc">=end</span>
</pre>

<p>Notice that <code>foo</code> and <code>bar</code> use different sets of templates: <code>foo</code> is a
public-readable repo that controls who can push versioned tags (releases),
while <code>bar</code> is a basic repo which supports <a href="user#personal-branches">personal branches</a>.</p>
<h1 id="advantages">advantages<a class="headerlink" href="#advantages" title="Permanent link"></a></h1>
<p>There are a few advantages with this approach:</p>
<ol>
<li>
<p>Maintaining access rules is much simpler.  Just choose an appropriate set
    of "template names", assign people to roles, and you're done.</p>
<p>There's no need to understand the intricacies of gitolite's ruleset.  (The
person who <em>wrote</em> the templates needs to, but not the person who is
maintaining dozens of repos by merely <em>using</em> those templates).</p>
<p><em>Heck you can probably roll a nice GUI around this.  Finally!</em></p>
</li>
<li>
<p>Reduces boilerplate.  A good example is the "personal branches" one above
    -- why have each of those 4 lines in every repo if you can instead refer
    to the feature by name somehow</p>
<p>A conf using this is often smaller, and definitely cleaner.</p>
</li>
<li>
<p>Reduces possible errors.  This should follow from the previous point.  It
    is easy to make mistakes when changing something due to some new
    requirement.  Did you remember to put in the two "deny" rules in the
    personal branches example above?</p>
<p>What if management decides to suspend pushes to one particular repo, and
you best choice was to add a catch-all "deny everyone" rule.  Did you
remember to put it at the top?  (If the templates are written as above
(including the <em>order in which you see them</em>), all you have to do is add
the word <code>is_suspended</code> somewhere in the list of templates that apply to
repo <code>bar</code>.)</p>
</li>
<li>
<p>Makes gitolite compile much faster, especially if you have thousands (or
    tens of thousands) of repos.</p>
</li>
</ol>
<h1 id="how-does-it-work">how does it work?<a class="headerlink" href="#how-does-it-work" title="Permanent link"></a></h1>
<h2 id="a-repo-and-its-users">a repo and its users<a class="headerlink" href="#a-repo-and-its-users" title="Permanent link"></a></h2>
<p>The <a href="wild">wildcard</a> repos feature already has a way to dissociate the actual
user names from the rule set in gitolite.conf.  For example, you can say</p>
<pre style="color: #ffffff; background-color: #000000;">
<span class="Statement">repo</span> foo/..*
    <span class="Statement">C</span>       =   <span class="Identifier">@managers</span>
    <span class="Statement">RW+</span>     =   WRITERS
    <span class="Statement">R</span>       =   READERS
    ...(etc.)...
</pre>

<p>This lets any "manager" create a repo whose name matches the pattern, then
assign arbitrary users to WRITERS and other roles using the <a href="user#setget-additional-permissions-for-repos-you-created"><code>perms</code>
command</a>.  These role assignments are stored in a simple text file
within the repository's bare directory (i.e., <code>~/repositories/$REPO.git</code>), so
they are specific to that repo, <strong>not</strong> common to all the repos matching that
pattern (as they would be if you listed the users in gitolite.conf directly).</p>
<p>In other words, we've taken the actual users (say alice, bob, etc) out of the
gitolite.conf file, and thus any changes to the users/roles no longer need to
involve gitolite.conf.</p>
<h2 id="a-repo-and-its-rules">a repo and its <em>rules</em><a class="headerlink" href="#a-repo-and-its-rules" title="Permanent link"></a></h2>
<p>In a "duh! Why didn't I think of this till now" moment, I realised I can do
the same for the <em>rules</em> that apply to a repo -- take that association out of
gitolite.conf.  That is what the <code>repo foo = [...list of templates...]</code> lines
are doing.</p>
<p>This list of templates is also stored in a plain text file just like the one
that contains the user/role mappings, and in the same directory.</p>
<h1 id="usage-and-syntax">usage and syntax<a class="headerlink" href="#usage-and-syntax" title="Permanent link"></a></h1>
<p>First, you have to add all the new "roles" to the <code>ROLES</code> hash in
<code>~/.gitolite.rc</code>.  If you edit that file, you'll see two pre-created roles
<code>READERS</code> and <code>WRITERS</code>.  Using the same syntax (including the trailing
comma), add any other roles you would like to use.  In our example up at the
top, the role names are <code>team</code>, <code>teamleads</code>, and <code>release_managers</code>.</p>
<div class="admonition danger">
<p>Rolenames must start with a letter, and be made up of only alphanumeric
characters and the underscore -- basically the same rules as a shell
variable.</p>
</div>
<p>Next, you define the templates, in the right order.  This is the only order
that matters (not the order in which the templates are <em>used</em> in any
particular repo in the template-data section).</p>
<p>Thus, this is also the part that requires gitolite rules expertise, but it's
hopefully a one-time or once-in-a-while thing.  (Or you can ask on the mailing
list!)</p>
<p>Finally, you define actual repos in gitolite.conf as shown in the example
above (including the <code>=begin template-data</code> and <code>=end</code> lines).  For each repo,
you specify what templates it will use, and then you map actual users to the
role names from those templates.</p>
<p>A few additional points:</p>
<ol>
<li>
<p>Not all role names need to be mapped to users (for example, we did not
    assign any <code>READERS</code> to repo <code>bar</code>, even though the <code>base</code> template
    specifies that role).</p>
</li>
<li>
<p>Within the gitolite.conf file, the placement of the template-data section
    does not matter.  (It's not even parsed by the conf compiler, which
    completely skips it.  It's processed by a new program that is run
    internally, and directly manipulates the gl-repo-groups and gl-perms
    files).</p>
</li>
<li>
<p>You can even have multiple template-data sections, with normal
    gitolite.conf rules, group definitions, <code>config</code> and <code>option</code> lines, etc.,
    in between.  (That's why there's a begin <em>and</em> an end!)</p>
<p>If you use <code>include</code> files, I strongly suggest -- in the interest of
sanity -- that you do not let a template-data section cross over a file
boundary (i.e., define the <code>begin</code> in one file, and the <code>end</code> in another).
It will work, if you understand what order the files are picked up, but
I'd still avoid such tricks if I were you!</p>
</li>
<li>
<p>If you want to insert some rules for a repo that is defined in a
    template-data section, you need to be careful where you place it.</p>
<p>Rules defined by templates are deemed to occur exactly where the template
<strong>definition</strong> is.  So, speaking of repo foo, pretend that the line <code>repo @is_public</code>
was replaced by <code>repo foo</code>, and similarly for <code>repo @has_releases</code> and
<code>repo @base</code>.</p>
<div class="admonition note">
<p>While we're on the subject, you can also pretend the role names on the
right hand side of the rules are replaced by the actual user names you
supplied in the template-data section.</p>
</div>
<p>In the example above, say you wanted to insert a new rule for repo foo,
which says that no one can rewind <code>master</code>, not even <code>teamleads</code>.</p>
<p>Clearly, the rules you need are:</p>
<p><pre style="color: #ffffff; background-color: #000000;">
<span class="Statement">repo</span> foo
    <span class="Statement">RW</span>  <span class="Constant">master</span>      =   sitaram
    <span class="Comment"># notice we had to expand 'teamleads' from foo's definition in the</span>
    <span class="Comment"># template-data section</span>
    <span class="Statement">-</span>   <span class="Constant">master</span>      =   <span class="WarningMsg">@all</span>
</pre></p>
<p>But where do you place them?  The answer is, <em>at least before the <code>base</code>
template is defined</em>.  Otherwise, the <code>RW+</code> in the base template will kick
in, and this restriction will fail to take effect.</p>
<p>Having said that, I would rather add a new template to deal with this,
placing it just before <code>repo @base</code>):</p>
<p><pre style="color: #ffffff; background-color: #000000;">
<span class="Statement">repo</span> <span class="Identifier">@limits_master</span>
    <span class="Statement">RW</span>  <span class="Constant">master</span>      =   teamleads
    <span class="Statement">-</span>   <span class="Constant">master</span>      =   <span class="WarningMsg">@all</span>
</pre></p>
<p>and then add <code>limits_master</code> to the list of templates that <code>foo</code> uses.</p>
<p>This has the advantages of being able to reuse that logic for other repos,
but even more important, you're avoiding repeating the actual teamleads
name(s) in more than one place!  (Potentially a huge future inconsistency
if someone forgot to update both places when the teamleads change!)</p>
</li>
<li>
<p>You can also do multiple repos in one shot, as well as repo groups:</p>
<p><pre style="color: #ffffff; background-color: #000000;">
<span class="Comment"># before the '=begin' line</span>
<span class="Identifier">@repogroup1</span><span class="PreProc"> = r1 r2 r3</span>
...
...
...</p>
<p><span class="PreProc">=begin template-data</span>
<span class="Statement">repo</span> foo bar <span class="Identifier">@repogroup1</span> = <span class="Constant">base is_public has_releases</span>
    ...
    ...
    ...
<span class="PreProc">=end</span>
</pre></p>
</li>
</ol>
<h1 id="bypassing-gitoliteconf-for-huge-sites">bypassing gitolite.conf for <em>huge</em> sites<a class="headerlink" href="#bypassing-gitoliteconf-for-huge-sites" title="Permanent link"></a></h1>
<p>Some sites have all their access control information in a web-based system,
and generate gitolite.conf as needed.  If they have tens of thousands of
repos, this "generated" gitolite.conf becomes humongous, and slows down
compiles.  Worse, the more repos you have, the more churn you have in terms of
changes to users accesses, so you do more compiles per hour than a smaller
site, which only makes things worse!</p>
<p>With this feature, you can bypass gitolite.conf and directly create/update
those text files to change the users and rule-sets for a given repo.  It
doesn't even have to touch gitolite or gitolite.conf (assuming the templates
and roles are already defined in gitolite.conf and <code>~/.gitolite.rc</code> of
course!)</p>
<h2 id="generating-the-text-files-externally">generating the text files externally<a class="headerlink" href="#generating-the-text-files-externally" title="Permanent link"></a></h2>
<p>The actual text files involved are very simple.  Remember these files go into
<code>~/repositories/$REPO.git</code> (or more accurately, <code>$(gitolite query-rc GL_REPO_BASE)/$REPO.git</code>).</p>
<p>For the example above, here's the file <code>gl-repo-groups</code> in repo foo:</p>
<pre><code>$ cat ~/repositories/foo.git/gl-repo-groups
base is_public has_releases
</code></pre>
<p>As you can see, this text is just what is after the <code>=</code> sign in the <code>repo</code>
line in the template data section of gitolite.conf.</p>
<p>and the file <code>gl-perms</code> is:</p>
<pre><code>$ cat ~/repositories/foo.git/gl-perms
teamleads           =   sitaram
team                =   dilbert wally
READERS             =   ashok
release_managers    =   alice
</code></pre>
<p>Again, this text is exactly the same as in the gitolite.conf!</p>
<h2 id="creating-new-repos">creating new repos<a class="headerlink" href="#creating-new-repos" title="Permanent link"></a></h2>
<p>Gitolite has no mechanism to create repos out of thin air, so if you don't
want to go via gitolite.conf, one way to do this is to add the following lines
to the conf file (one-time):</p>
<pre style="color: #ffffff; background-color: #000000;">
<span class="Statement">repo</span> [a-zA-Z0-9].*
    <span class="Statement">C</span>   =   <span class="PreProc">gitolite-admin</span>
</pre>

<p>and then, at the server, run this:</p>
<pre><code>GL_USER=gitolite-admin gitolite create foo/bar
</code></pre>
<p>That creates the repo, and you can now populate its <code>gl-perms</code> and
<code>gl-repo-groups</code> files.</p>
<h1 id="thanks-to">thanks to...<a class="headerlink" href="#thanks-to" title="Permanent link"></a></h1>
<p>...pingou on irc, and the Fedora project, for having 42,000 repos in a conf
file over 560,000 lines long.  Which made me think about this real hard for
days, including two false starts (one of which I published and have just now
reverted, and one which was so kludgey I refuse to acknowledge it exists --
thank God I did not publish that!)</p>
<h1 id="miscellanea">miscellanea<a class="headerlink" href="#miscellanea" title="Permanent link"></a></h1>
<p>This feature is not the same as <a href="">wild</a> repos; repos here are created by the
gitolite admin or a server-side backend, <em>not</em> by a gitolite user.  (However,
this feature piggy-backs on a lot of the code for wild repos, adding just a
wee bit -- the "duh" comment earlier in this document -- to complete it).</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js" defer></script>
        <script src="search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
