
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="list-non-core.html">
      
      
        <link rel="next" href="emergencies.html">
      
      
        
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>(quick! how do I...) the cookbook - Gitolite</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
        <script src="https://unpkg.com/iframe-worker/shim"></script>
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="css/gitolite.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#gitolite-cookbook" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Gitolite" class="md-header__button md-logo" aria-label="Gitolite" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Gitolite
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              (quick! how do I...) the cookbook
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Gitolite" class="md-nav__button md-logo" aria-label="Gitolite" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Gitolite
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    what/why
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    what/why
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="concepts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    concepts, conventions, terminology
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    install and setup
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    install and setup
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="quick_install.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    (unix/ssh experts) quick install and setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="install.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    normal ssh mode install and setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="fool_proof_setup.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    (if all else fails) fool-proof, step-by-step, install and setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="http.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HTTP mode install
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="migr.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    migrating from v2
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    use
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    use
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    basic
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    basic
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="basic-admin.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    basic administration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="conf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    the "conf" file (part 1)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="conf-2.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    the "conf" file (part 2)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="rc.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    the "rc" file
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="user.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    your users' view
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    advanced
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    advanced
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="git-config.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    setting git-config values
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="options.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gitolite options
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="wild.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ad hoc user-created ("wild") repos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="templates.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    using templates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="vref.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    virtual refs (part 1)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="vref-2.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    virtual refs (part 2)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="deleg.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    delegation of admin duties
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="gitweb-daemon.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gitweb and git-daemon
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="mirroring.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    mirroring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    customise
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    customise
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="non-core.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    core and "non-core" gitolite
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="dev-notes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    writing your own non-core code
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="triggers.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gitolite triggers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="list-non-core.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    list of non-core programs shipped with gitolite
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    (quick! how do I...) the cookbook
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="cookbook.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    (quick! how do I...) the cookbook
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#administration" class="md-nav__link">
    <span class="md-ellipsis">
      
        administration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="administration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#separating-key-admin-from-repo-admin" class="md-nav__link">
    <span class="md-ellipsis">
      
        separating "key admin" from "repo admin"
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access" class="md-nav__link">
    <span class="md-ellipsis">
      
        access
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#looking-up-repo-access-from-external-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        looking up repo access from external tools
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allowing-access-by-other-programs" class="md-nav__link">
    <span class="md-ellipsis">
      
        allowing access by other programs
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#commands" class="md-nav__link">
    <span class="md-ellipsis">
      
        commands
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-your-own-commands" class="md-nav__link">
    <span class="md-ellipsis">
      
        adding your own commands
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#making-commands-available-to-remote-users" class="md-nav__link">
    <span class="md-ellipsis">
      
        making commands available to remote users
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        hooks
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="hooks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-your-own-update-hooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        adding your own update hooks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-other-non-update-hooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        adding other (non-update) hooks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variation-maintain-these-hooks-in-the-gitolite-admin-repo" class="md-nav__link">
    <span class="md-ellipsis">
      
        variation: maintain these hooks in the gitolite-admin repo
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#v36-variation-repo-specific-hooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        (v3.6+) variation: repo-specific hooks
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#triggers" class="md-nav__link">
    <span class="md-ellipsis">
      
        triggers
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="triggers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-your-own-triggers" class="md-nav__link">
    <span class="md-ellipsis">
      
        adding your own triggers
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vrefs" class="md-nav__link">
    <span class="md-ellipsis">
      
        VREFs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VREFs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-your-own-vrefs" class="md-nav__link">
    <span class="md-ellipsis">
      
        adding your own VREFs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-vrefs" class="md-nav__link">
    <span class="md-ellipsis">
      
        example VREFs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="example VREFs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-1-restricting-by-day-of-week" class="md-nav__link">
    <span class="md-ellipsis">
      
        example 1: restricting by day of week
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-2-restricting-by-source-ip-address" class="md-nav__link">
    <span class="md-ellipsis">
      
        example 2: restricting by source IP address
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wild-repos" class="md-nav__link">
    <span class="md-ellipsis">
      
        wild repos
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wild repos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#making-exceptions-for-specific-instances-of-a-wild-repo" class="md-nav__link">
    <span class="md-ellipsis">
      
        making exceptions for specific instances of a wild repo
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#moving-stuff-around" class="md-nav__link">
    <span class="md-ellipsis">
      
        moving stuff around
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="moving stuff around">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#moving-a-gitolite-install-from-one-machine-to-another" class="md-nav__link">
    <span class="md-ellipsis">
      
        moving a gitolite install from one machine to another
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    HELP!
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    HELP!
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="emergencies.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    emergency!!
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ssh
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    ssh
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ssh.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ssh
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="glssh.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    how gitolite uses ssh
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="sts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ssh troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="regex.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    regular expressions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    other docs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    other docs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="odds-and-ends.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    miscellaneous features
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="locking.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    locking binary files
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="testing.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    testing gitolite
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="package.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    packaging gitolite
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="gitolite-and-ssh-certs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gitolite and ssh certs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_6" >
        
          
          <label class="md-nav__link" for="__nav_6_6" id="__nav_6_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    more about gitolite
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    more about gitolite
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="files.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gitolite files & directories
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="rc-33.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    the 3.3 format rc file
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="perf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    performance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="internals.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    internals
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_7" >
        
          
          <label class="md-nav__link" for="__nav_6_7" id="__nav_6_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    contrib
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    contrib
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contrib/ssh-and-http.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Using both ssh and http
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contrib/putty.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Putty and Msysgit
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contrib/sskm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Self-service key management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contrib/ukm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    User key management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contrib/README-emacs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Emacs major mode
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="no-way.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    no way!
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#administration" class="md-nav__link">
    <span class="md-ellipsis">
      
        administration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="administration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#separating-key-admin-from-repo-admin" class="md-nav__link">
    <span class="md-ellipsis">
      
        separating "key admin" from "repo admin"
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access" class="md-nav__link">
    <span class="md-ellipsis">
      
        access
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#looking-up-repo-access-from-external-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        looking up repo access from external tools
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allowing-access-by-other-programs" class="md-nav__link">
    <span class="md-ellipsis">
      
        allowing access by other programs
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#commands" class="md-nav__link">
    <span class="md-ellipsis">
      
        commands
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-your-own-commands" class="md-nav__link">
    <span class="md-ellipsis">
      
        adding your own commands
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#making-commands-available-to-remote-users" class="md-nav__link">
    <span class="md-ellipsis">
      
        making commands available to remote users
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        hooks
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="hooks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-your-own-update-hooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        adding your own update hooks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-other-non-update-hooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        adding other (non-update) hooks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variation-maintain-these-hooks-in-the-gitolite-admin-repo" class="md-nav__link">
    <span class="md-ellipsis">
      
        variation: maintain these hooks in the gitolite-admin repo
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#v36-variation-repo-specific-hooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        (v3.6+) variation: repo-specific hooks
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#triggers" class="md-nav__link">
    <span class="md-ellipsis">
      
        triggers
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="triggers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-your-own-triggers" class="md-nav__link">
    <span class="md-ellipsis">
      
        adding your own triggers
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vrefs" class="md-nav__link">
    <span class="md-ellipsis">
      
        VREFs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VREFs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-your-own-vrefs" class="md-nav__link">
    <span class="md-ellipsis">
      
        adding your own VREFs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-vrefs" class="md-nav__link">
    <span class="md-ellipsis">
      
        example VREFs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="example VREFs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-1-restricting-by-day-of-week" class="md-nav__link">
    <span class="md-ellipsis">
      
        example 1: restricting by day of week
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-2-restricting-by-source-ip-address" class="md-nav__link">
    <span class="md-ellipsis">
      
        example 2: restricting by source IP address
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wild-repos" class="md-nav__link">
    <span class="md-ellipsis">
      
        wild repos
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wild repos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#making-exceptions-for-specific-instances-of-a-wild-repo" class="md-nav__link">
    <span class="md-ellipsis">
      
        making exceptions for specific instances of a wild repo
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#moving-stuff-around" class="md-nav__link">
    <span class="md-ellipsis">
      
        moving stuff around
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="moving stuff around">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#moving-a-gitolite-install-from-one-machine-to-another" class="md-nav__link">
    <span class="md-ellipsis">
      
        moving a gitolite install from one machine to another
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="gitolite-cookbook">gitolite cookbook<a class="headerlink" href="#gitolite-cookbook" title="Permanent link">#</a></h1>
<center>(a.k.a. "stop all that rambling and just tell me what I need to do!")</center>

<hr />
<p>Documentation is meant to be as complete as possible, which means it attempts
to cover all situations and scenarios.  That makes it harder to read.</p>
<p>However, if you make some assumptions, remove the rationale, justification,
exceptions and special cases, etc., and generally just say <em>what</em> is to be
done rather than explain <em>why</em>, many tasks can be described very easily.</p>
<p>Or, if the main documentation already does that, a cookbook may help you find
it faster, simply because it's organised differently.</p>
<p>Maybe this will help.  If you run into problems, please check the main
documentation before asking for help.</p>
<h2 id="administration">administration<a class="headerlink" href="#administration" title="Permanent link">#</a></h2>
<h3 id="separating-key-admin-from-repo-admin">separating "key admin" from "repo admin"<a class="headerlink" href="#separating-key-admin-from-repo-admin" title="Permanent link">#</a></h3>
<p>In gitolite, the person who controls the keys is the most critical in terms of
security -- because he can always add his own key in your name :-)</p>
<p>Traditionally, the same person also administers repos and permissions.  But
sometimes you want to separate them.</p>
<p>To separate those roles, put the following in conf/gitolite.conf, and let the
repo-manager manage everything through "actual.conf":</p>
<pre style="color: #ffffff; background-color: #000000;">
<span class="Statement">repo</span> gitolite-admin
    <span class="Statement">RW+</span> = key-manager repo-manager

    <span class="Statement">RW+</span> <span class="Constant">VREF/</span><span class="PreProc">NAME/</span>                    = key-manager
    <span class="Statement">-</span>   <span class="Constant">VREF/</span><span class="PreProc">NAME/</span><span class="Constant">keydir/</span>             = <span class="WarningMsg">@all</span>
    <span class="Statement">-</span>   <span class="Constant">VREF/</span><span class="PreProc">NAME/</span><span class="Constant">conf/gitolite.conf</span>  = <span class="WarningMsg">@all</span>

<span class="Statement">include</span> &quot;actual.conf&quot;
</pre>

<h2 id="access">access<a class="headerlink" href="#access" title="Permanent link">#</a></h2>
<h3 id="looking-up-repo-access-from-external-tools">looking up repo access from external tools<a class="headerlink" href="#looking-up-repo-access-from-external-tools" title="Permanent link">#</a></h3>
<p>There are two supported interfaces for this, one in perl and one in shell.
Other languages should probably use the shell mode.  (The shell mode has a
very convenient "batch" mode if you need to check many repos at once).</p>
<p><strong>Perl interface</strong>: A good intro to this, including a link to code, using
gitweb as an example can be found by looking for 'repo-specific authorisation
in gitweb' in the page on <a href="gitweb-daemon.html">allowing access to gitweb and
git-daemon</a>. Some notes:</p>
<ul>
<li>be sure to read the comments in the code to learn exactly how to adapt it
    to your needs</li>
<li>in place of the <code>can_read</code> function in that code, you can of course use
    <code>can_write</code>.  In fact, reading the comments in "Easy.pm" (look for it in
    the source) shows you several other interesting tests you can make, like
    <code>is_admin</code>, <code>in_group</code>, and <code>owns</code>.</li>
</ul>
<p><strong>Shell interface</strong>: If you want to do this from shell, it's even easier. The
same "Easy.pm" source contains comments that show shell equivalents for each
of the functions it exports, but here's a sample:</p>
<pre><code>if gitolite access -q reponame username W
then
    ...
</code></pre>
<p>You can even test for access to specific branches:</p>
<pre><code>if gitolite access -q reponame username W master
then
    ...
</code></pre>
<p><span class="gray">If your gitolite is older than v3.6, you must use the full ref name;
just 'master' won't do.</span></p>
<h3 id="allowing-access-by-other-programs">allowing access by other programs<a class="headerlink" href="#allowing-access-by-other-programs" title="Permanent link">#</a></h3>
<p>Giving external tools (like apache) access to gitolite repositories involves
making sure that the unix owner/group and permissions settings allow this.
This is all described in the UMASK section in the page on the <a href="rc.html">rc file</a>,
because that's the only setting that gitolite controls; every thing else is
pure Unix.</p>
<h2 id="commands">commands<a class="headerlink" href="#commands" title="Permanent link">#</a></h2>
<h3 id="adding-your-own-commands">adding your own commands<a class="headerlink" href="#adding-your-own-commands" title="Permanent link">#</a></h3>
<p>To add a command, say <code>foo</code>, do this:</p>
<ol>
<li>
<p>add this line in the rc file, within the <code>%RC</code> block, if it's not already
    present, or uncomment it if it's already present and commented out:</p>
<pre><code>LOCAL_CODE =&gt; "$ENV{HOME}/local",
</code></pre>
</li>
<li>
<p>copy the program <code>foo</code> into <code>$HOME/local/commands</code>.  (Don't forget the
    <code>chmod +x</code>!)</p>
</li>
</ol>
<h3 id="making-commands-available-to-remote-users">making commands available to remote users<a class="headerlink" href="#making-commands-available-to-remote-users" title="Permanent link">#</a></h3>
<p>Once you do the above, <code>foo</code> is available as <code>gitolite foo</code>.  To make it
available to remote users (as <code>ssh git@host foo</code>), add the line:</p>
<pre><code>`foo`,
</code></pre>
<p>(including the comma at the end) to the ENABLE list in the rc file.</p>
<h2 id="hooks">hooks<a class="headerlink" href="#hooks" title="Permanent link">#</a></h2>
<p>Note: the main documentation for this feature starts <a href="non-core.html#hooks-and-gitolite">here</a>.</p>
<h3 id="adding-your-own-update-hooks">adding your own update hooks<a class="headerlink" href="#adding-your-own-update-hooks" title="Permanent link">#</a></h3>
<p>You have some update hooks (for example crlf checking) that you want to
include in gitolite.  Assuming the hook itself is tested and works as a normal
<strong>git</strong> update hook does (i.e., conforms to what <code>man githooks</code> says an update
hook should do), here's how to do this:</p>
<ol>
<li>
<p>add this line in the rc file, within the <code>%RC</code> block, if it's not already
    present, or uncomment it if it's already present and commented out:</p>
<pre><code>LOCAL_CODE =&gt; "$ENV{HOME}/local",
</code></pre>
</li>
<li>
<p>copy your update hook to a subdirectory called VREF under this directory,
    giving it a suitable name (let's say "crlf"):</p>
<pre><code># log on to gitolite hosting user on the server, then:
cd $HOME
mkdir -p local/VREF
cp your-crlf-update-hook local/VREF/crlf
chmod +x local/VREF/crlf
</code></pre>
</li>
<li>
<p>in your gitolite-admin clone, edit conf/gitolite.conf and
    add lines like this:</p>
<pre><code>    -   VREF/crlf       =   @all
</code></pre>
<p>to each repo that should have that "update" hook.</p>
<p>Alternatively, you can simply add this at the end of the
gitolite.conf file:</p>
<p><pre style="color: #ffffff; background-color: #000000;">
<span class="Statement">repo</span> <span class="Identifier">@all</span>
    <span class="Statement">-</span>   <span class="Constant">VREF/crlf</span>       =   <span class="WarningMsg">@all</span>
</pre></p>
<p>Either way, add/commit/push the change to the gitolite-admin repo.</p>
</li>
</ol>
<h3 id="adding-other-non-update-hooks">adding other (non-update) hooks<a class="headerlink" href="#adding-other-non-update-hooks" title="Permanent link">#</a></h3>
<p>Say you want other hooks, like a post-receive hook.  Here's how:</p>
<ol>
<li>
<p>add this line in the rc file, within the <code>%RC</code> block, if it's not already
    present, or uncomment it if it's already present and commented out:</p>
<pre><code>LOCAL_CODE =&gt; "$ENV{HOME}/local",
</code></pre>
</li>
<li>
<p>put your hooks into that directory, in a sub-sub-directory called
    "hooks/common":</p>
<pre><code># log on to gitolite hosting user on the server, then:
cd $HOME
mkdir -p local/hooks/common
cp your-post-receive-hook local/hooks/common/post-receive
chmod +x local/hooks/common/post-receive
</code></pre>
</li>
<li>
<p>run <code>gitolite setup</code> to have the hooks propagate to existing repos (repos
    created after this will get them anyway).</p>
</li>
</ol>
<h3 id="variation-maintain-these-hooks-in-the-gitolite-admin-repo">variation: maintain these hooks in the gitolite-admin repo<a class="headerlink" href="#variation-maintain-these-hooks-in-the-gitolite-admin-repo" title="Permanent link">#</a></h3>
<div class="admonition danger">
<p class="admonition-title">Important security note:</p>
<p><strong>If you enable this, anyone who can push changes to the admin repo will
effectively be able to run any arbitrary command on the server.</strong>  See
<a href="rc.html#security-note-gitolite-admin-and-shell-access">gitolite admin and shell access</a> for more background.</p>
</div>
<p>If you want to maintain these update hooks (VREFs) or non-update hooks
(post-update, pre-receive, post-receive) in the gitolite-admin repo, instead
of having to log on to the server and make changes, the procedure is almost
the same except for the following differences:</p>
<ol>
<li>
<p>add this line in the rc file, within the <code>%RC</code> block, if it's not already
    present, or uncomment it if it's already present and commented out:</p>
<pre><code>LOCAL_CODE =&gt; "$rc{GL_ADMIN_BASE}/local",
</code></pre>
<p>Notice "local" is <em>not</em> in <code>$HOME</code> like in the previous examples!</p>
</li>
<li>
<p>the hooks/scripts are to be added inside your gitolite-admin clone, not on
    the server.  That is, whereever the above two sections say <code>cd $HOME</code>,
    you should read it as "cd /path/to/your/gitolite-admin-clone".</p>
<p>(The directory <code>local</code> will be within this clone of course, not in
<code>$HOME</code>.)</p>
</li>
<li>
<p>add/commit/push as usual.</p>
</li>
</ol>
<p>For update hooks, you will of course need to add VREF rule lines to
appropriate repos in the conf file.  For non-update hooks, you <strong>don't</strong> need
to run 'gitolite setup' on the server; the push takes care of that.</p>
<h3 id="v36-variation-repo-specific-hooks"><span class="gray">(v3.6+)</span> variation: repo-specific hooks<a class="headerlink" href="#v36-variation-repo-specific-hooks" title="Permanent link">#</a></h3>
<p>Until now, the non-update hooks you specified apply to all repos.  Here's how
to apply them only to certain repos:</p>
<ol>
<li>
<p>add this line in the rc file, within the <code>%RC</code> block, if it's not already
    present, or uncomment it if it's already present and commented out:</p>
<pre><code>LOCAL_CODE =&gt; "$rc{GL_ADMIN_BASE}/local",
</code></pre>
</li>
<li>
<p>uncomment the 'repo-specific-hooks' line in the rc file or add it to the
    ENABLE list if it doesn't exist.</p>
<p>If your rc file does not have an ENABLE list, you need to add this to the
POST_COMPILE and the POST_CREATE lists.  Click <a href="triggers.html#adding-your-own-scripts-to-a-trigger">here</a> for more on
all this.</p>
</li>
<li>
<p>put your hooks into your gitolite-admin clone, as follows:</p>
<pre><code># on your workstation
cd /path/to/your/gitolite-admin-clone
mkdir -p local/hooks/repo-specific
</code></pre>
<p>Now add your hooks to that directory, but instead of using the git
"standard" names (pre-receive, post-receive, post-update), you use
descriptive names (e.g. "deploy", "RSS-post", etc).</p>
<p><strong>For pre-receive or pre-auto-gc you should not use more than one hook.
If you really need more than one, ask on the mailing list.</strong></p>
</li>
<li>
<p>add them to the repos you want them to be active in, in your conf file.
    For example:</p>
<pre><code>repo foo
    option hook.post-update     =   jenkins
repo bar @baz
    option hook.post-update     =   deploy RSS-post
</code></pre>
</li>
<li>
<p>add, commit, and push the admin repo.</p>
</li>
</ol>
<h2 id="triggers">triggers<a class="headerlink" href="#triggers" title="Permanent link">#</a></h2>
<h3 id="adding-your-own-triggers">adding your own triggers<a class="headerlink" href="#adding-your-own-triggers" title="Permanent link">#</a></h3>
<p>First, write your trigger code, using the documentation <a href="triggers.html">here</a>.
Note especially the sections "common arguments" and "trigger-specific
arguments".  Look in the shipped triggers for ideas.</p>
<div class="admonition danger">
<p class="admonition-title">Note:</p>
<p>If your trigger is a perl module, as opposed to a standalone script or
executable, please see the section on <a href="triggers.html#adding-a-perl-module-as-a-trigger">adding a perl module as a
trigger</a>.</p>
</div>
<p>Let's say your trigger is called <code>foo</code>, and it will be a <code>PRE_GIT</code> trigger.</p>
<ol>
<li>
<p>add this line in the rc file, within the <code>%RC</code> block, if it's not already
    present, or uncomment it if it's already present and commented out:</p>
<pre><code>LOCAL_CODE =&gt; "$ENV{HOME}/local",
</code></pre>
</li>
<li>
<p>copy the program <code>foo</code> into <code>$HOME/local/triggers</code>.  (Don't forget the
    <code>chmod +x</code>!)</p>
</li>
<li>
<p>edit <code>~/.gitolite.rc</code> again, and look for a <code>PRE_GIT</code> section.  If it
    exists, add <code>'foo',</code> (note the trailing comma!) to it.  If it does not
    exist, add this block just before the <code>ENABLE</code> section:</p>
<pre><code>PRE_GIT =&gt;
[
    'foo'
],
</code></pre>
<p>(again, note the trailing comma at the end of the block!)</p>
<p>After saving the file, test that this worked by running <code>gitolite query-rc PRE_GIT</code>;
your <code>foo</code> should be in the output list.  If it's not, back up
and double check your work.</p>
</li>
</ol>
<p>That should be it.</p>
<h2 id="vrefs">VREFs<a class="headerlink" href="#vrefs" title="Permanent link">#</a></h2>
<h3 id="adding-your-own-vrefs">adding your own VREFs<a class="headerlink" href="#adding-your-own-vrefs" title="Permanent link">#</a></h3>
<p>Adding VREFs is the same as adding the update hook, so please see the section
on "adding your own update hooks" above.</p>
<h3 id="example-vrefs">example VREFs<a class="headerlink" href="#example-vrefs" title="Permanent link">#</a></h3>
<p>However, <em>writing</em> a proper VREF is not the same as writing a normal git
"update hook".  A proper VREF does more than just take 3 arguments, do
something, and exit with a non-zero exit code for failure.</p>
<p>A VREF is called with at least 4 more arguments after the 3 that git itself
defines for an update hook, plus usually at least one or two more.  It also
returns a lot more meaningful results via STDOUT.</p>
<p>Here are some examples.  I also advise you to keep a browser tab open to the
doc on <a href="vref.html#what-arguments-are-passed-to-the-vref-maker">VREF arguments</a> as you look at these.</p>
<div class="admonition danger">
<p class="admonition-title">Important:</p>
<p><strong>VREFs only come into play for push operations.  When we say "access" in
this section, we mean only write access.</strong>  If you want to restrict it
even for reads, you can do this in a <code>PRE_GIT</code> trigger; there's an example
in <code>contrib/triggers/IP-check</code> in the gitolite source tree that may be
useful as a template.</p>
</div>
<h4 id="example-1-restricting-by-day-of-week">example 1: restricting by day of week<a class="headerlink" href="#example-1-restricting-by-day-of-week" title="Permanent link">#</a></h4>
<p>Here's the conf extract to say "junior devs can only push on weekdays":</p>
<pre style="color: #ffffff; background-color: #000000;">
<span class="Statement">repo</span> foo
    <span class="Statement">-</span>   <span class="Constant">VREF/DAY/Sat</span>    =   <span class="WarningMsg">@junior-devs</span>
    <span class="Statement">-</span>   <span class="Constant">VREF/DAY/Sun</span>    =   <span class="WarningMsg">@junior-devs</span>
</pre>

<p>The code for this VREF is ridiculously simple:</p>
<pre style="color: #ffffff; background-color: #000000;">
<span class="Comment">#!/bin/bash</span>
<span class="Statement">echo</span><span class="Constant"> VREF/DAY/</span><span class="Special">`date +%a`</span>
</pre>

<p>On encountering the VREF rules (i.e., when a junior dev tries to push to this
repo), gitolite calls the "DAY" VREF-maker.  The code within the VREF maker
simply echoes something like "VREF/DAY/Mon", where the last part is whatever
the actual day of the week happens to be.</p>
<p>This output is then treated as a virtual ref and matched against the rules.
On a Monday to Friday, nothing happens, because the VREFs generated do not
match any deny rules (or indeed any rules at all).  On weekends, they do
match, and the push is denied.</p>
<h4 id="example-2-restricting-by-source-ip-address">example 2: restricting by source IP address<a class="headerlink" href="#example-2-restricting-by-source-ip-address" title="Permanent link">#</a></h4>
<p>This one restricts junior developers to push to this repo only from a specific
network block.  The conf file here is slightly different.  We know that the
VREF-maker will return with <em>some</em> network address (as you'll see in the code
later), so we set it up so that the correct network block is allowed and
anything else is disallowed:</p>
<pre style="color: #ffffff; background-color: #000000;">
<span class="Statement">repo</span> foo
    <span class="Statement">RW+</span> <span class="Constant">VREF/FROM/192.168.48.0/23</span>   =   <span class="Identifier">@junior-devs</span>
    <span class="Statement">-</span>   <span class="Constant">VREF/FROM</span>                   =   <span class="WarningMsg">@junior-devs</span>
</pre>

<p>The code is not that complex.  We take the user's actual IP address (this is
available as the first word in <code>$SSH_CONNECTION</code> for ssh users, and for
smart-http users, gitolite fakes it and creates that variable!).  We then
treat the "23" in the VREF rule, which appears to the code as <code>$9</code>, as the
number of bits in the network address, then compute the network address for
the users IP with that number of bits.</p>
<p>This network address is then sent back.  (The <code>$9</code> is added back at the end,
but this is only to enable it to match the VREF rule).</p>
<pre style="color: #ffffff; background-color: #000000;">
<span class="Comment">#!/bin/bash</span>

<span class="Comment"># exit if no arguments were supplied to the VREF.  This covers the</span>
<span class="Comment"># second VREF rule in the conf above</span>
<span class="Statement">[</span> <span class="Statement">-n</span> <span class="Statement">&quot;</span><span class="PreProc">$8</span><span class="Statement">&quot;</span> <span class="Statement">]</span> || <span class="Statement">exit</span> <span class="Constant">0</span>

<span class="Identifier">from</span>=<span class="PreProc">${</span><span class="PreProc">SSH_CONNECTION</span><span class="Statement">%%</span> *<span class="PreProc">}</span>

<span class="Statement">eval</span> <span class="Special">`ipcalc </span><span class="Special">-n</span><span class="Special"> </span><span class="PreProc">$from</span><span class="Special">/</span><span class="PreProc">$9</span><span class="Special">`</span>       <span class="Comment"># sets env var &quot;NETWORK&quot;</span>

<span class="Statement">echo</span><span class="Constant"> VREF/FROM/</span><span class="PreProc">$NETWORK</span><span class="Constant">/</span><span class="PreProc">$9</span>
</pre>

<p>For a source IP of 192.168.49.97, this runs <code>ipcalc -n 192.168.49.97/23</code>,
which gives the network address 192.168.48.0.  The echo then just sends back
VREF/FROM/192.168.48.0/23.  This VREF matches the RW+ line.</p>
<p>But if the IP is, say, 192.168.45.67, running <code>ipcalc -n 192.168.45.67/23</code>
gives you 192.168.44.0.  The echo then send back VREF/FROM/192.18.44.0/23,
which won't match the RW+ line, but will match the next one and thus deny
the push.</p>
<p>(One thing that may not be obvious in this specific example is that you have
to be careful when constructing the VREF rule.  For any VREF/FROM/A/B, the
result of running <code>ipcalc -n A/B</code> must be A, otherwise this won't work.  That
is, the bits of the network address after the network bits must be zero).</p>
<h2 id="wild-repos">wild repos<a class="headerlink" href="#wild-repos" title="Permanent link">#</a></h2>
<h3 id="making-exceptions-for-specific-instances-of-a-wild-repo">making exceptions for <em>specific</em> instances of a wild repo<a class="headerlink" href="#making-exceptions-for-specific-instances-of-a-wild-repo" title="Permanent link">#</a></h3>
<p>Sometimes you want to specify rules or config for specific instances of a wild
repo, while still leaving it to be created by a user in the normal way.</p>
<p>This <strong>will not</strong> work:</p>
<pre style="color: #ffffff; background-color: #000000;">
<span class="Statement">repo</span> foo/..*
    <span class="Statement">C</span>                   =   <span class="PreProc">blah blah</span>
    <span class="Statement">RW+</span>                 =   CREATOR
    <span class="Statement">RW</span>                  =   WRITERS
    <span class="Statement">R</span>                   =   READERS

<span class="Comment"># this does </span><span class="Todo">NOT</span><span class="Comment"> work</span>
<span class="Statement">repo</span> foo/special-1
    <span class="Statement">RW+</span>                 =   sitaram
    <span class="Statement">option</span>  <span class="Identifier">foo.bar</span>     =   <span class="Constant">baz</span>
</pre>

<p>The repo will be created as a <strong>normal</strong> (not wild) repo as soon as you push,
which means you can't run the <a href="user.html#setget-additional-permissions-for-repos-you-created">perms</a> command on it to add people to the
READERS and WRITERS <a href="wild.html#roles">roles</a>, or do other things that wild repos allow.</p>
<p>The mental nudge you need to deal with this is to think what you would do if
you had to write the same rule for more than one repo, say, any repo starting
with "foo/special-" followed by a number.  You'd use a pattern.  And a pattern
prevents an ordinary repo from being created.</p>
<p>So do this:</p>
<pre style="color: #ffffff; background-color: #000000;">
<span class="Comment"># this will work</span>
<span class="Statement">repo</span> foo/special-[1]
    <span class="Statement">RW+</span>                 =   sitaram
    <span class="Statement">option</span>  <span class="Identifier">foo.bar</span>     =   <span class="Constant">baz</span>
</pre>

<p>Using a pattern for just one repo might sound like a kludge, but it's
perfectly valid and supported.</p>
<p>Note that you do NOT need a "C" rule in there, since the pattern is a subset
of the previous one (<code>foo/..*</code>), everything there applies to this repo also.
If you're not sure why that is, you may need to read up on <a href="conf.html#rule-accumulation">rule
accumulation</a>.</p>
<h2 id="moving-stuff-around">moving stuff around<a class="headerlink" href="#moving-stuff-around" title="Permanent link">#</a></h2>
<h3 id="moving-a-gitolite-install-from-one-machine-to-another">moving a gitolite install from one machine to another<a class="headerlink" href="#moving-a-gitolite-install-from-one-machine-to-another" title="Permanent link">#</a></h3>
<p>See <a href="install.html#moving-servers">moving servers</a>.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="list-non-core.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: list of non-core programs shipped with gitolite">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                list of non-core programs shipped with gitolite
              </div>
            </div>
          </a>
        
        
          
          <a href="emergencies.html" class="md-footer__link md-footer__link--next" aria-label="Next: emergency!!">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                emergency!!
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": ".", "features": ["navigation.footer", "search.suggest", "search.highlight"], "search": "assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>