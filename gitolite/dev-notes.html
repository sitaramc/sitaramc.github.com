
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="non-core.html">
      
      
        <link rel="next" href="triggers.html">
      
      
        
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>writing your own non-core code - Gitolite</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
        <script src="https://unpkg.com/iframe-worker/shim"></script>
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="css/gitolite.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#writing-your-own-non-core-programs" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Gitolite" class="md-header__button md-logo" aria-label="Gitolite" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Gitolite
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              writing your own non-core code
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Gitolite" class="md-nav__button md-logo" aria-label="Gitolite" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Gitolite
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    what/why
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    what/why
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="concepts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    concepts, conventions, terminology
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    install and setup
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    install and setup
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="quick_install.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    (unix/ssh experts) quick install and setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="install.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    normal ssh mode install and setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="fool_proof_setup.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    (if all else fails) fool-proof, step-by-step, install and setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="http.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HTTP mode install
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="migr.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    migrating from v2
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    use
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    use
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    basic
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    basic
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="basic-admin.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    basic administration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="conf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    the "conf" file (part 1)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="conf-2.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    the "conf" file (part 2)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="rc.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    the "rc" file
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="user.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    your users' view
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    advanced
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    advanced
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="git-config.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    setting git-config values
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="options.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gitolite options
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="wild.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ad hoc user-created ("wild") repos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="templates.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    using templates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="vref.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    virtual refs (part 1)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="vref-2.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    virtual refs (part 2)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="deleg.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    delegation of admin duties
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="gitweb-daemon.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gitweb and git-daemon
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="mirroring.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    mirroring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    customise
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    customise
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="non-core.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    core and "non-core" gitolite
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    writing your own non-core code
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="dev-notes.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    writing your own non-core code
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#environment-variables-and-other-inputs" class="md-nav__link">
    <span class="md-ellipsis">
      
        environment variables and other inputs
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apis" class="md-nav__link">
    <span class="md-ellipsis">
      
        APIs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="APIs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-shell-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        the shell API
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-perl-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        the perl API
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-your-own" class="md-nav__link">
    <span class="md-ellipsis">
      
        writing your own...
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="writing your own...">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commands" class="md-nav__link">
    <span class="md-ellipsis">
      
        ...commands
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        ...hooks
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="...hooks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anything-but-the-update-hook" class="md-nav__link">
    <span class="md-ellipsis">
      
        anything but the update hook
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-hook" class="md-nav__link">
    <span class="md-ellipsis">
      
        update hook
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trigger-programs" class="md-nav__link">
    <span class="md-ellipsis">
      
        ...trigger programs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sugar" class="md-nav__link">
    <span class="md-ellipsis">
      
        ..."sugar"
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-1-repo-specific-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        appendix 1: repo-specific environment variables
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-2-log-file-format" class="md-nav__link">
    <span class="md-ellipsis">
      
        appendix 2: log file format
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-3-sending-log-lines-to-syslog" class="md-nav__link">
    <span class="md-ellipsis">
      
        appendix 3: sending log lines to syslog
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="triggers.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gitolite triggers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="list-non-core.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    list of non-core programs shipped with gitolite
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cookbook.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    (quick! how do I...) the cookbook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    HELP!
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    HELP!
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="emergencies.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    emergency!!
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ssh
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    ssh
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ssh.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ssh
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="glssh.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    how gitolite uses ssh
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="sts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ssh troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="regex.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    regular expressions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    other docs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    other docs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="odds-and-ends.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    miscellaneous features
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="locking.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    locking binary files
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="testing.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    testing gitolite
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="package.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    packaging gitolite
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="gitolite-and-ssh-certs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gitolite and ssh certs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_6" >
        
          
          <label class="md-nav__link" for="__nav_6_6" id="__nav_6_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    more about gitolite
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    more about gitolite
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="files.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    gitolite files & directories
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="rc-33.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    the 3.3 format rc file
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="perf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    performance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="internals.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    internals
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_7" >
        
          
          <label class="md-nav__link" for="__nav_6_7" id="__nav_6_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    contrib
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    contrib
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contrib/ssh-and-http.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Using both ssh and http
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contrib/putty.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Putty and Msysgit
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contrib/sskm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Self-service key management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contrib/ukm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    User key management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contrib/README-emacs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Emacs major mode
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="no-way.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    no way!
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#environment-variables-and-other-inputs" class="md-nav__link">
    <span class="md-ellipsis">
      
        environment variables and other inputs
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apis" class="md-nav__link">
    <span class="md-ellipsis">
      
        APIs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="APIs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-shell-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        the shell API
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-perl-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        the perl API
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-your-own" class="md-nav__link">
    <span class="md-ellipsis">
      
        writing your own...
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="writing your own...">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commands" class="md-nav__link">
    <span class="md-ellipsis">
      
        ...commands
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        ...hooks
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="...hooks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anything-but-the-update-hook" class="md-nav__link">
    <span class="md-ellipsis">
      
        anything but the update hook
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-hook" class="md-nav__link">
    <span class="md-ellipsis">
      
        update hook
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trigger-programs" class="md-nav__link">
    <span class="md-ellipsis">
      
        ...trigger programs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sugar" class="md-nav__link">
    <span class="md-ellipsis">
      
        ..."sugar"
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-1-repo-specific-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        appendix 1: repo-specific environment variables
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-2-log-file-format" class="md-nav__link">
    <span class="md-ellipsis">
      
        appendix 2: log file format
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-3-sending-log-lines-to-syslog" class="md-nav__link">
    <span class="md-ellipsis">
      
        appendix 3: sending log lines to syslog
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="writing-your-own-non-core-programs">writing your own "non-core" programs<a class="headerlink" href="#writing-your-own-non-core-programs" title="Permanent link">#</a></h1>
<hr />
<p><strong>This page is about <em>writing</em> hooks, commands, triggers, VREFS, and sugar
scripts.  <em>Installing</em> them, including "where and how", is described
<a href="non-core.html#for-your-non-core-programs">here</a></strong>.</p>
<p>Note: the <a href="non-core.html">non-core</a> page is the starting point for all information about
customising gitolite.</p>
<h2 id="environment-variables-and-other-inputs">environment variables and other inputs<a class="headerlink" href="#environment-variables-and-other-inputs" title="Permanent link">#</a></h2>
<p>In general, the following environment variables should always be available:</p>
<pre><code>GL_BINDIR
GL_REPO_BASE
GL_ADMIN_BASE
</code></pre>
<p><code>GL_BINDIR</code> is loosely equivalent to GIT_EXEC_PATH in git.  <code>GL_REPO_BASE</code>
is always <code>$HOME/repositories</code>, and <code>GL_ADMIN_BASE</code> is <code>$HOME/.gitolite</code>.
(You might ask why, if they're fixed values, do we need those variables.  Good
question... next!)</p>
<p>In addition, commands invoked by a remote client also have <code>GL_USER</code>, while
hooks have <code>GL_USER</code> as well as <code>GL_REPO</code> (which is the <a href="concepts.html#the-logical-repo-name">logical
reponame</a>).</p>
<p>A special form of the <a href="options.html">option</a> syntax can be used to set
<a href="dev-notes.html#appendix-1-repo-specific-environment-variables">repo-specific environment variables</a>.</p>
<p>Finally, note that triggers get a lot of relevant information from gitolite as
arguments; see <a href="triggers.html">here</a> for details.</p>
<h2 id="apis">APIs<a class="headerlink" href="#apis" title="Permanent link">#</a></h2>
<h3 id="the-shell-api">the shell API<a class="headerlink" href="#the-shell-api" title="Permanent link">#</a></h3>
<p>The following commands exist to help you write shell scripts that interact
easily with gitolite.  Each of them responds to <code>-h</code> so please run that for
more info.</p>
<ul>
<li>
<p><code>gitolite access</code> to check access rights given repo, user, type of access
    (R, W, ...) and refname (optional).  Example use: src/commands/desc.</p>
</li>
<li>
<p><code>gitolite creator</code> to get/check the creator of a repo.  Example use:
    src/commands/desc.</p>
</li>
<li>
<p><code>gitolite git-config</code> to check gitolite options or git config variables
    directly from gitolite's "compiled" output, (i.e., without looking at the
    actual <code>repo.git/config</code> file or using the <code>git config</code> command).  Example
    use: src/triggers/post-compile/update-gitweb-access-list.</p>
</li>
<li>
<p><code>gitolite query-rc</code> to check the value of an RC variable.  Example use:
    src/commands/desc.</p>
</li>
</ul>
<p>In addition, you can also look at the comments in src/lib/Gitolite/Easy.pm
(the perl API module) for ideas.</p>
<h3 id="the-perl-api">the perl API<a class="headerlink" href="#the-perl-api" title="Permanent link">#</a></h3>
<p>...is implemented by <code>Gitolite::Easy</code>; the comments in
src/lib/Gitolite/Easy.pm serve as documentation.</p>
<p>Note that some of the perl functions called by Easy.pm will change the current
directory to something else, without saving and restoring the directory.
Patches (to Easy.pm <em>only</em>) welcome.</p>
<h2 id="writing-your-own">writing your own...<a class="headerlink" href="#writing-your-own" title="Permanent link">#</a></h2>
<h3 id="commands">...commands<a class="headerlink" href="#commands" title="Permanent link">#</a></h3>
<p>Commands are standalone programs, in any language you like.  They simply
receive the arguments you append.  In addition, the env var <code>GL_USER</code> is
available if it is being run remotely.  src/commands/desc is the best example
at present.</p>
<h3 id="hooks">...hooks<a class="headerlink" href="#hooks" title="Permanent link">#</a></h3>
<h4 id="anything-but-the-update-hook">anything but the update hook<a class="headerlink" href="#anything-but-the-update-hook" title="Permanent link">#</a></h4>
<p>If you want to add any hook other than the update hook, 'man githooks' is all
you need.</p>
<h4 id="update-hook">update hook<a class="headerlink" href="#update-hook" title="Permanent link">#</a></h4>
<p>If you want to add additional <code>update</code> hook functionality, do this:</p>
<ul>
<li>
<p>Write and test your update hook separately from gitolite.</p>
</li>
<li>
<p>Now add the code as a VREF (see <a href="non-core.html#for-your-non-core-programs">here</a> for details).  Let's say
    you called it "foo".</p>
</li>
<li>
<p>To call your new update hook to all accesses for all repos, add this to
    the end of your conf file:</p>
<p><pre style="color: #ffffff; background-color: #000000;">
<span class="Statement">repo</span> <span class="Identifier">@all</span>
    <span class="Statement">-</span>       <span class="Constant">VREF/foo</span>        =   <span class="WarningMsg">@all</span>
</pre></p>
</li>
</ul>
<p>As you probably guessed, you can make your additional update hooks more
selective, applying them only to some repos / users / combinations.</p>
<p>Note: a normal update hook expects 3 arguments (ref, old SHA, new SHA).  A
VREF will get those three, followed by at least 4 more.  Your VREF should just
ignore the extra args.</p>
<h3 id="trigger-programs">...trigger programs<a class="headerlink" href="#trigger-programs" title="Permanent link">#</a></h3>
<p>Trigger programs run at specific points in gitolite's execution, with specific
arguments being passed to them.  See the <a href="triggers.html">triggers</a> page for details.</p>
<p>You can write programs that are both manually runnable as well as callable by
trigger events, especially if they don't <em>need</em> any arguments.</p>
<h3 id="sugar">..."sugar"<a class="headerlink" href="#sugar" title="Permanent link">#</a></h3>
<p>Syntactic sugar helpers are NOT complete, standalone, programs.  They must
include a perl sub called <code>sugar_script</code> that takes in a listref, and returns
a listref.  The listrefs point to a list that contains the entire conf file
(with all <a href="conf.html#include-files">include</a> processing already done).  You create a new list with
contents modified as you like and return a ref to it.</p>
<p>There are a couple of examples in src/syntactic-sugar.</p>
<h2 id="appendix-1-repo-specific-environment-variables">appendix 1: repo-specific environment variables<a class="headerlink" href="#appendix-1-repo-specific-environment-variables" title="Permanent link">#</a></h2>
<p>A special form of the <a href="options.html">option</a> syntax can be used to set
repo-specific environment variables that are visible to gitolite triggers and
any git hooks you may install.</p>
<p>For example, let's say you installed a post-update hook that initiates a CI
job.  By default, of course, this hook will be active for <em>all</em>
gitolite-managed repos.  However, you only want it to run for some specific
repos, say r1, r2, and r4.</p>
<p>To do that, first add this to the gitolite.conf:</p>
<pre style="color: #ffffff; background-color: #000000;">
<span class="Statement">repo</span> r1 r2 r4
    <span class="Statement">option</span> <span class="Identifier">ENV.CI</span> = <span class="Constant">1</span>
</pre>

<p>This creates an environment variable called <code>GL_OPTION_CI</code> with the value 1,
before any trigger or hook is invoked.</p>
<p>Note: option names <em>must</em> start with <code>ENV.</code>, followed by a seqence of
characters composed of alphas, numbers, and the underscore character.</p>
<p>Now the hook running the CI job can easily decide what to do:</p>
<pre><code># exit if $GL_OPTION_CI is not set
[ -z $GL_OPTION_CI ] &amp;&amp; exit

... rest of CI job code as before ...
</code></pre>
<p>Of course you can also do the opposite; i.e. decide that the listed repos
should <em>not</em> run the CI job but all other repos should:</p>
<pre style="color: #ffffff; background-color: #000000;">
<span class="Statement">repo</span> <span class="Identifier">@all</span>
    <span class="Statement">option</span> <span class="Identifier">ENV.CI</span> = <span class="Constant">1</span>

<span class="Statement">repo</span> r1 r2 r4
    <span class="Statement">option</span> <span class="Identifier">ENV.CI</span> = <span class="Constant">&quot;&quot;</span>
</pre>

<p>(The hook code remains the same as before.)</p>
<p><font color="gray">Before this feature was added, you could still do this, by
using the <code>gitolite git-config</code> command inside the hook code to test for
options and configs set for the repo, like:</p>
<pre><code>if gitolite git-config -q reponame gitolite-options.option-name
then
    ...
</code></pre>
<p>The new method is much more convenient, as you can see.</font></p>
<h2 id="appendix-2-log-file-format">appendix 2: log file format<a class="headerlink" href="#appendix-2-log-file-format" title="Permanent link">#</a></h2>
<p>Here's a brief description of gitolite's log file format.  All fields are tab
separated.</p>
<p>There are two kinds of lines in the log file:</p>
<ul>
<li>
<p>third field non-empty: actual log lines.  These are documented below.</p>
</li>
<li>
<p>third field empty (i.e., two tabs after the second field): extra output to
    help diagnose problems. These are NOT documented and may change without
    notice.  They can be turned off completely by setting the RC variable
    <code>LOG_EXTRA</code> to 0.</p>
</li>
</ul>
<p>For all types of log lines, the first two fields are:</p>
<ul>
<li>
<p>field 1: local time, in <code>YYYY-MM-DD.HH:MM:SS</code> format</p>
</li>
<li>
<p>field 2: transaction ID or "TID".  This is actually the PID of the
    outermost command that was initiated (usually "gitolite-shell").  It helps
    to keep log lines pertaining to one "run" together, even if several
    sub-commands are spawned (like for example from triggers, or even the
    update hook itself).</p>
</li>
</ul>
<p>The third and later fields are all dependent on what type of log line it is.</p>
<p>The various log line formats are:</p>
<ul>
<li>
<p><strong>start</strong></p>
<p>This line denotes the beginning of a gitolite operation.</p>
<ul>
<li>
<p>field 3: 'ssh' or 'http'</p>
</li>
<li>
<p>field 4: <code>ARGV=&lt;comma-separated list of command line arguments&gt;</code></p>
<p>Usually this is just the gitolite username (the argument to
gitolite-shell, as supplied by the forced command in the authorized
keys file).  If you're <a href="sts.html#giving-shell-access-to-gitolite-users">giving shell access</a> to some
users, this would be <code>-s,username</code>.  That's two command line arguments
("-s" and the username), comma separated.</p>
</li>
<li>
<p>field 5: <code>SOC=&lt;original command from client&gt;</code></p>
<p>This is the command exactly as the git client sent it, or the user
typed it.  Typically this is one of these:</p>
<pre><code>git-upload-pack 'reponame'
git-receive-pack 'reponame'
</code></pre>
<p>(including the single quotes, because that's what the client sent).</p>
<p>Gitolite commands are also recorded as is, so this could be something
like <code>info</code> or perhaps <code>perms -l reponame</code> etc.</p>
</li>
<li>
<p>field 6: <code>FROM=&lt;ip address&gt;</code></p>
</li>
</ul>
</li>
<li>
<p><strong>pre-git</strong></p>
<p>This log line appears when the first access check succeeds (i.e., before
git-upload-pack or git-receive-pack is called).</p>
<ul>
<li>field 3: 'pre_git'</li>
<li>field 4: reponame</li>
<li>field 5: username</li>
<li>field 6: 'R' or 'W'</li>
<li>field 7: 'any'</li>
<li>field 8: the refex that allowed access</li>
</ul>
</li>
<li>
<p><strong>update</strong></p>
<p>This log line appears when the second access check succeeds (i.e., when
the update hook decides to allow the push).</p>
<ul>
<li>field 3: 'update'</li>
<li>field 4: reponame</li>
<li>field 5: username</li>
<li>field 6: 'W', '+', 'C', 'D', 'WM', '+M', 'CM', or 'DM'</li>
<li>field 7: ref name (like 'refs/heads/master')</li>
<li>field 8: old SHA</li>
<li>field 9: new SHA</li>
<li>field 10: the refex that allowed access</li>
</ul>
<p>The values in field 6 reflect the possible <a href="conf-2.html#appendix-1-different-types-of-write-operations">write types</a>, but
note that there is a difference between what the log file contains and
what the gitolite.conf file contains (e.g., <code>+</code> versus <code>RW+</code>).  There's
another subtle difference for those who are not thinking clearly: the
<code>RW+</code> in the conf file is a permission, but it would show up as a <code>+</code> in
the log file only if an <em>actual</em> force push had happened, otherwise it
would be just <code>W</code>.</p>
<p>By the way, notice that fields 7 to 9 are exactly what git itself supplies
the update hook (see 'man githooks').</p>
<p><font color="gray">There is a special version of this line that appears
when someone <a href="emergencies.html#bypassing-gitolite">bypasses</a> gitolite's access control to push directly
on the server.  The 'reponame' (field 4) is replaced by the full path of
the repo being pushed to, the username (field 5) is replaced by the Unix
userid in parentheses, and the operation code (field 6) is
'bypass'.</font></p>
</li>
<li>
<p><strong>create</strong></p>
<p>This log line appears when a wild repo was auto-created by a user.</p>
<ul>
<li>field 3: 'create'</li>
<li>field 4: reponame</li>
<li>field 5: username</li>
<li>field 6: 'R' or 'W'</li>
</ul>
<p>Field 6 is 'perms-c' if the wild repo is created using the perms command's
'-c' option.</p>
</li>
<li>
<p><strong>end</strong></p>
<p>This indicates the end of the transaction.  Normally, you should not see
any more lines with the same TID after this line.</p>
<ul>
<li>field 3: 'END'</li>
</ul>
</li>
<li>
<p><strong>warnings</strong> and <strong>errors</strong></p>
<p>Typically seen when access is denied.</p>
<ul>
<li>field 3: 'warn' or 'die'</li>
<li>field 4: message.  Parts of the message (like reponame, username, etc)
    are not split out into fields, though.</li>
</ul>
</li>
<li>
<p><strong>cli</strong></p>
<p>This logs gitolite sub-commands run directly on the server, like <code>gitolite
setup</code> etc.</p>
<ul>
<li>field 3: 'cli'</li>
<li>field 4: 'gitolite'</li>
<li>field 5 to end: arguments supplied to gitolite command, one per field</li>
</ul>
</li>
</ul>
<h2 id="appendix-3-sending-log-lines-to-syslog">appendix 3: sending log lines to syslog<a class="headerlink" href="#appendix-3-sending-log-lines-to-syslog" title="Permanent link">#</a></h2>
<p>Gitolite allows you to send log entries to syslog.  To do that, uncomment one
of the commented out values for LOG_DEST in the rc file.  If your rc file
does not have any such lines, add one of the following lines just after the
LOG_EXTRA line:</p>
<pre><code># use this to log only to syslog
LOG_DEST                        =&gt; 'syslog',

# use this to log to syslog and the normal gitolite log
LOG_DEST                        =&gt; 'syslog,normal',
</code></pre>
<p>Please note:</p>
<ul>
<li>
<p>The first two fields described in the previous section (time, TID) are
    different.  Syslog takes care of putting in the time, and the TID is
    appended to the ident, so instead of just 'gitolite', you get
    'gitolite[$GL_TID]'.</p>
<p>This means actual log lines will look something like this, since syslog
appends the actual PID to the ident as well:</p>
<pre><code>Jun  3 09:26:11 sita-lt gitolite[14950][14950]: ssh ARGV=admin  SOC=git-receive-pack 'gitolite-admin'   FROM=::1
Jun  3 09:26:11 sita-lt gitolite[14950][14950]: pre_git gitolite-admin  admin   W   any refs/.*
Jun  3 09:26:11 sita-lt gitolite[14950][14991]: update  gitolite-admin  admin   W   refs/heads/master   [snip]
Jun  3 09:26:13 sita-lt gitolite[14950][14950]: END
</code></pre>
</li>
<li>
<p>Normal log messages use the 'info' priority, while LOG_EXTRA messages
    (see previous section) use the 'debug' priority.</p>
<p>It may be useful to send the debug output to a different output file.
Unlike in the normal gitolite logs, where there is an extra tab character
(or, an empty field, depending on how you look at it), the syslog lines do
not let you easily distinguish between the main log lines and the
LOG_EXTRA lines.</p>
</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="non-core.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: core and &#34;non-core&#34; gitolite">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                core and "non-core" gitolite
              </div>
            </div>
          </a>
        
        
          
          <a href="triggers.html" class="md-footer__link md-footer__link--next" aria-label="Next: gitolite triggers">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                gitolite triggers
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": ".", "features": ["navigation.footer", "search.suggest", "search.highlight"], "search": "assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>