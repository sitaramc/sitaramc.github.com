
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="dev-notes.html">
      
      
        <link rel="next" href="list-non-core.html">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>gitolite triggers - Gitolite</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
        <script src="https://unpkg.com/iframe-worker/shim"></script>
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="css/gitolite.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#gitolite-triggers" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Gitolite" class="md-header__button md-logo" aria-label="Gitolite" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Gitolite
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              gitolite triggers
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Gitolite" class="md-nav__button md-logo" aria-label="Gitolite" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Gitolite
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    what/why
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            what/why
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="concepts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    concepts, conventions, terminology
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    install and setup
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            install and setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="quick_install.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    (unix/ssh experts) quick install and setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="install.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    normal ssh mode install and setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="fool_proof_setup.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    (if all else fails) fool-proof, step-by-step, install and setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="http.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTTP mode install
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="migr.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    migrating from v2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    use
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            use
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    basic
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            basic
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="basic-admin.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    basic administration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="conf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    the "conf" file (part 1)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="conf-2.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    the "conf" file (part 2)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="rc.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    the "rc" file
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="user.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    your users' view
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    advanced
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="git-config.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    setting git-config values
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="options.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    gitolite options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="wild.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ad hoc user-created ("wild") repos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="templates.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    using templates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="vref.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    virtual refs (part 1)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="vref-2.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    virtual refs (part 2)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="deleg.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    delegation of admin duties
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="gitweb-daemon.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    gitweb and git-daemon
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="mirroring.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mirroring
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    customise
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            customise
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="non-core.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    core and "non-core" gitolite
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="dev-notes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    writing your own non-core code
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    gitolite triggers
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="triggers.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    gitolite triggers
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#types-of-trigger-programs" class="md-nav__link">
    <span class="md-ellipsis">
      types of trigger programs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manually-firing-triggers" class="md-nav__link">
    <span class="md-ellipsis">
      manually firing triggers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      common arguments
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trigger-specific-arguments-and-other-details" class="md-nav__link">
    <span class="md-ellipsis">
      trigger-specific arguments and other details
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-your-own-scripts-to-a-trigger" class="md-nav__link">
    <span class="md-ellipsis">
      adding your own scripts to a trigger
    </span>
  </a>
  
    <nav class="md-nav" aria-label="adding your own scripts to a trigger">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-perl-module-as-a-trigger" class="md-nav__link">
    <span class="md-ellipsis">
      adding a perl module as a trigger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#displaying-the-resulting-trigger-list" class="md-nav__link">
    <span class="md-ellipsis">
      displaying the resulting trigger list
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tips-and-examples" class="md-nav__link">
    <span class="md-ellipsis">
      tips and examples
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="list-non-core.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    list of non-core programs shipped with gitolite
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cookbook.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    (quick! how do I...) the cookbook
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    HELP!
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            HELP!
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="emergencies.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    emergency!!
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ssh
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            ssh
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ssh.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ssh
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="glssh.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    how gitolite uses ssh
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="sts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ssh troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="regex.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    regular expressions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    other docs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            other docs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="odds-and-ends.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    miscellaneous features
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="locking.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    locking binary files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="testing.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    testing gitolite
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="package.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    packaging gitolite
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="gitolite-and-ssh-certs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    gitolite and ssh certs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_6" >
        
          
          <label class="md-nav__link" for="__nav_6_6" id="__nav_6_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    more about gitolite
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_6">
            <span class="md-nav__icon md-icon"></span>
            more about gitolite
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="files.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    gitolite files & directories
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="rc-33.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    the 3.3 format rc file
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="perf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    performance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="internals.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    internals
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_7" >
        
          
          <label class="md-nav__link" for="__nav_6_7" id="__nav_6_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    contrib
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_7">
            <span class="md-nav__icon md-icon"></span>
            contrib
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contrib/ssh-and-http.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using both ssh and http
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contrib/putty.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Putty and Msysgit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contrib/sskm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Self-service key management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contrib/ukm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User key management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contrib/README-emacs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Emacs major mode
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="no-way.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    no way!
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#types-of-trigger-programs" class="md-nav__link">
    <span class="md-ellipsis">
      types of trigger programs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manually-firing-triggers" class="md-nav__link">
    <span class="md-ellipsis">
      manually firing triggers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      common arguments
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trigger-specific-arguments-and-other-details" class="md-nav__link">
    <span class="md-ellipsis">
      trigger-specific arguments and other details
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-your-own-scripts-to-a-trigger" class="md-nav__link">
    <span class="md-ellipsis">
      adding your own scripts to a trigger
    </span>
  </a>
  
    <nav class="md-nav" aria-label="adding your own scripts to a trigger">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-perl-module-as-a-trigger" class="md-nav__link">
    <span class="md-ellipsis">
      adding a perl module as a trigger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#displaying-the-resulting-trigger-list" class="md-nav__link">
    <span class="md-ellipsis">
      displaying the resulting trigger list
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tips-and-examples" class="md-nav__link">
    <span class="md-ellipsis">
      tips and examples
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="gitolite-triggers">gitolite triggers<a class="headerlink" href="#gitolite-triggers" title="Permanent link">#</a></h1>
<hr />
<p>Gitolite runs trigger code at several different times.  The features you
enable in the <a href="rc.html">rc</a> file determine what commands to run (or functions in perl
modules to call) at each trigger point.  Example of trigger points are
<code>INPUT</code>, <code>PRE_GIT</code>, <code>POST_COMPILE</code>, etc.; the full list is examined later in
this page.</p>
<div class="admonition note">
<p>Quick tip: triggers are to gitolite what hooks are to git; we simply use a
different name to avoid constantly having to clarify which hooks we mean!
The other difference in gitolite is that each trigger runs multiple pieces
of code, not just one program with the same name as the hook, like git
does.</p>
</div>
<h2 id="types-of-trigger-programs">types of trigger programs<a class="headerlink" href="#types-of-trigger-programs" title="Permanent link">#</a></h2>
<p>There are two types of trigger programs.  Standalone scripts are placed in
triggers or its subdirectories.  Such scripts are quick and easy to write in
any language of your choice.</p>
<p>Triggers written as perl modules are placed in lib/Gitolite/Triggers.  Perl
modules have to follow some conventions (see some of the shipped modules for
ideas) but the advantage is that they can set environment variables and change
the argument list of the gitolite-shell program that invokes them.</p>
<p>If you intend to write your own triggers, it's a good idea to examine a
default install of gitolite, paying attention to:</p>
<ul>
<li>the path names in various trigger lists in the rc file,</li>
<li>corresponding path names in the src/ directory in gitolite source,</li>
<li>and for perl modules, the package names and function names within.</li>
</ul>
<h2 id="manually-firing-triggers">manually firing triggers<a class="headerlink" href="#manually-firing-triggers" title="Permanent link">#</a></h2>
<p>It's easy to manually fire triggers from the server command line.  For
example:</p>
<pre><code>gitolite trigger POST_COMPILE
</code></pre>
<p>However if the triggered code depends on arguments (see next section) this
won't work.  (The <code>POST_COMPILE</code> trigger programs all just happen to not
require any arguments, so it works).</p>
<h2 id="common-arguments">common arguments<a class="headerlink" href="#common-arguments" title="Permanent link">#</a></h2>
<p>Triggers receive the following arguments:</p>
<ol>
<li>
<p>Any arguments mentioned in the rc file (for an example, see the renice
    command).</p>
</li>
<li>
<p>The name of the trigger as a string (example, <code>"POST_COMPILE"</code>), so you
    can call the same program from multiple triggers and it can know where it
    was called from.</p>
</li>
<li>
<p>And finally, zero or more arguments specific to the trigger, as given in
    the next section.</p>
</li>
</ol>
<h2 id="trigger-specific-arguments-and-other-details">trigger-specific arguments and other details<a class="headerlink" href="#trigger-specific-arguments-and-other-details" title="Permanent link">#</a></h2>
<p>Here are the <strong>rest of</strong> the arguments for each trigger, plus a brief
description of when the trigger runs.  (Note that when the repo name is passed
in as an argument, it is without the '.git' suffix).</p>
<ul>
<li>
<p><code>INPUT</code> runs before pretty much anything else.  INPUT trigger scripts
    <em>must</em> be in perl, since they manipulate the arguments and the environment
    of the 'gitolite-shell' program itself.  Most commonly they will
    read/change <code>@ARGV</code>, and/or <code>$ENV{SSH_ORIGINAL_COMMAND}</code>.</p>
<p>There are certain conventions to adhere to; please see some of the shipped
samples or ask me if you need help writing your own.</p>
</li>
<li>
<p><code>ACCESS_1</code> runs after the first access check.  Extra arguments:</p>
<ul>
<li>repo</li>
<li>user</li>
<li>'R' or 'W'</li>
<li>'any'</li>
<li>result (see notes below)</li>
</ul>
<p>'result' is the return value of the access() function.  If it contains the
uppercase word "DENIED", the access was rejected.  Otherwise it is the
refex that caused the access to succeed.</p>
<div class="admonition note">
<p>Note that if access is rejected, gitolite-shell will die as soon as it
returns from the trigger.</p>
</div>
</li>
<li>
<p><code>ACCESS_2</code> runs after the second access check, which is invoked by the
    update hook to check the ref.  Extra arguments:</p>
<ul>
<li>repo</li>
<li>user</li>
<li>any of W, +, C, D, WM, +M, CM, DM</li>
<li>the ref being updated (e.g., 'refs/heads/master')</li>
<li>result</li>
<li>old SHA</li>
<li>new SHA</li>
</ul>
<p><code>ACCESS_2</code> also runs on each <a href="vref.html">VREF</a> that gets checked.  In this case
the "ref" argument will start with "VREF/", and the last two arguments
won't be passed.</p>
<p>'result' is similar to <code>ACCESS_1</code>, except that it is the <em>update hook</em>
which dies as soon as access is rejected for the ref or any of the VREFs.
Control then returns to git, and then to gitolite-shell, so the <code>POST_GIT</code>
trigger <em>will</em> run.</p>
</li>
<li>
<p><code>PRE_GIT</code> and <code>POST_GIT</code> run just before and after the git command.
    Extra arguments:</p>
<ul>
<li>repo</li>
<li>user</li>
<li>'R' or 'W'</li>
<li>'any'</li>
<li>the git command ('git-receive-pack', 'git-upload-pack', or
    'git-upload-archive') being invoked.</li>
</ul>
<div class="admonition note">
<p>Note that the <code>POST_GIT</code> trigger has no way of knowing if the push
succeeded, because 'git-shell' (or maybe 'git-receive-pack', I don't
know) exits cleanly even if the update hook died.</p>
</div>
</li>
<li>
<p><code>PRE_CREATE</code> and <code>POST_CREATE</code> run just before and after a new repo is
    created.  In addition, any command that creates a repo (like 'fork') or
    potentially changes permissions (like 'perms') may choose to run
    <code>POST_CREATE</code>.</p>
<p>Extra arguments for normal repo creation (i.e., by adding a "repo foo"
line to the conf file):</p>
<ul>
<li>repo</li>
</ul>
<p>Extra arguments for wild repo creation:</p>
<ul>
<li>repo</li>
<li>user</li>
<li>invoking operation<ul>
<li>'R' for fetch/clone/ls-remote, 'W' for push</li>
<li>can also be anything set by the command running the trigger (e.g.,
    see the perms and fork commands).  This lets the trigger code know
    how it was invoked.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>POST_COMPILE</code> runs after an admin push has successfully "compiled" the
    config file.  By default, the next thing is to update the ssh authkeys
    file, then all the 'git-config's, gitweb access, and daemon access.</p>
<p>No extra arguments.</p>
</li>
</ul>
<h2 id="adding-your-own-scripts-to-a-trigger">adding your own scripts to a trigger<a class="headerlink" href="#adding-your-own-scripts-to-a-trigger" title="Permanent link">#</a></h2>
<p><span class="box-r">Note: for gitolite v3.3 or less, adding your own scripts
to a trigger list was simply a matter of finding the trigger name in the rc
file and adding an entry to it.  Even for gitolite v3.4 or higher, if your rc
file was created before v3.4, <em>it will continue to work, and you can continue
to add triggers to it the same way as before</em>.</span></p>
<p>The rc file (from v3.4 on) does not have trigger lists; it has a simple list
of "features" within a list called "ENABLE" in the rc file.  Simply comment
out or uncomment appropriate entries, and gitolite will <em>internally</em> create
the trigger lists correctly.</p>
<p>This is fine for triggers that are shipped with gitolite, but does present a
problem when you want to add your own.</p>
<p>Here's how to do that: Let's say you wrote yourself a trigger script called
'foo', to be invoked from the <code>POST_CREATE</code> trigger list.  To do that, just
add the following to the <a href="rc.html">rc</a> file, just before the ENABLE section:</p>
<pre><code>POST_CREATE                 =&gt;
    [
        'foo'
    ],
</code></pre>
<p>Since the ENABLE list pulls in the rest of the trigger entries, this will be
<em>effectively</em> as if you had done this in a v3.3 rc file:</p>
<pre><code>POST_CREATE                 =&gt;
    [
        'foo',
        'post-compile/update-git-configs',
        'post-compile/update-gitweb-access-list',
        'post-compile/update-git-daemon-access-list',
    ],
</code></pre>
<p>As you can see, the 'foo' gets added to the top of the list.</p>
<h3 id="adding-a-perl-module-as-a-trigger">adding a perl module as a trigger<a class="headerlink" href="#adding-a-perl-module-as-a-trigger" title="Permanent link">#</a></h3>
<p>If your trigger is a perl module, as opposed to a standalone script or
executable, the process is almost the same as above, except what you add to
the rc file it looks like this:</p>
<pre><code>POST_CREATE                 =&gt;
    [
        'Foo::post_create'
    ],
</code></pre>
<p>Gitolite will add the <code>Gitolite::Triggers::</code> prefix to the name given there.</p>
<p>The subroutine to be run (in this example, <code>post_create</code>) is looked for in the
<code>Gitolite::Triggers::Foo</code> package, so this requires that the perl module
start with a package header like this:</p>
<pre><code>package Gitolite::Triggers::Foo;
</code></pre>
<h3 id="displaying-the-resulting-trigger-list">displaying the resulting trigger list<a class="headerlink" href="#displaying-the-resulting-trigger-list" title="Permanent link">#</a></h3>
<p>You can use the 'gitolite query-rc' command to see what the trigger list
actually looks like.  For example:</p>
<pre><code>gitolite query-rc POST_CREATE
</code></pre>
<!--
(ref: https://groups.google.com/forum/#!searchin/gitolite/NON_CORE/gitolite/2kZaqLohSz0/LsIo_W8B2I8J )
-->
<!--

### running your script AFTER the defaults

By default, your custom scripts will run *before* the shipped ones (e.g., look
at where `foo` landed in the example above).

There is a way to make `foo` land *after* the shipped scripts, but it is not
documented because it never came up till now, and I don't want to commit to it
in case I want to change the implementation.

Let's say your post-compile script is called "my-custom-config". Here's what
you do:

-   add something like 'my-cust' (could be anything you like, as long as it
    matches the next step) to the ENABLE list in the rc file. Dont forget the
    trailing comma if it's not the last element (and in perl you can add a
    trailing comma even if it *is* the last element)

-   after the ENABLE list, but still within the RC hash, add this:

        NON_CORE => "
        my-cust POST_COMPILE post-compile/my-custom-config
        ",

    The words in caps are fixed. The others you know, and as you can see the
    "my-cust" here matches the "my-cust" in the ENABLE list.

-   After you do this, you can test whether it worked or not:

        gitolite query-rc POST_COMPILE

    and it should show you what it thinks are the items in that list, in the
    order it has them.

-->

<h2 id="tips-and-examples">tips and examples<a class="headerlink" href="#tips-and-examples" title="Permanent link">#</a></h2>
<ol>
<li>
<p>If you have code that latches onto more than one trigger, collecting data
    (such as for logging), then the outputs may be intermixed.  You can record
    the value of the environment variable <code>GL_TID</code> to tie together related
    entries.</p>
<p>The documentation on the <a href="dev-notes.html#appendix-2-log-file-format">log file format</a> has more on this.</p>
</li>
<li>
<p>If you look at CpuTime.pm, you'll see that it's <code>input()</code> function doesn't
    set or change anything, but does set a package variable to record the
    start time.  Later, when the same module's <code>post_git()</code> function is
    invoked, it uses this variable to determine elapsed time.</p>
<p><em>(This is a very nice and simple example of how you can implement features
by latching onto multiple events and sharing data to do something)</em>.</p>
</li>
<li>
<p>You can even change the reponame the user sees, behind his back.  Alias.pm
    handles that.</p>
</li>
<li>
<p>Finally, as an exercise for the reader, consider how you would create a
    brand new env var that contains the <em>comment</em> field of the ssh pubkey that
    was used to gain access, using the information <a href="sts.html#distinguishing-one-key-from-another">here</a>.</p>
</li>
</ol>
<!--

  - PRE_GIT, ACCESS_1, and ACCESS_2 must only write to STDERR

  - perl triggers should not chdir() away

-->












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="dev-notes.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: writing your own non-core code">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                writing your own non-core code
              </div>
            </div>
          </a>
        
        
          
          <a href="list-non-core.html" class="md-footer__link md-footer__link--next" aria-label="Next: list of non-core programs shipped with gitolite">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                list of non-core programs shipped with gitolite
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": ["navigation.footer", "search.suggest", "search.highlight"], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>