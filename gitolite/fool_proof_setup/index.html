<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>(if all else fails) fool-proof, step-by-step, install and setup - Gitolite</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/gitolite.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">Gitolite</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="..">home</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">what/why <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../overview/">overview</a>
</li>
                            
<li >
    <a href="../concepts/">concepts, conventions, terminology</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">install and setup <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../quick_install/">(unix/ssh experts) quick install and setup</a>
</li>
                            
<li >
    <a href="../install/">normal ssh mode install and setup</a>
</li>
                            
<li class="active">
    <a href="./">(if all else fails) fool-proof, step-by-step, install and setup</a>
</li>
                            
<li >
    <a href="../http/">HTTP mode install</a>
</li>
                            
<li >
    <a href="../migr/">migrating from v2</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">use <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
  <li class="dropdown-submenu">
    <a href="#">basic</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../basic-admin/">basic administration</a>
</li>
            
<li >
    <a href="../conf/">the "conf" file (part 1)</a>
</li>
            
<li >
    <a href="../conf-2/">the "conf" file (part 2)</a>
</li>
            
<li >
    <a href="../rc/">the "rc" file</a>
</li>
            
<li >
    <a href="../user/">your users' view</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">advanced</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../git-config/">setting git-config values</a>
</li>
            
<li >
    <a href="../options/">gitolite options</a>
</li>
            
<li >
    <a href="../wild/">ad hoc user-created ("wild") repos</a>
</li>
            
<li >
    <a href="../templates/">using templates</a>
</li>
            
<li >
    <a href="../vref/">virtual refs (part 1)</a>
</li>
            
<li >
    <a href="../vref-2/">virtual refs (part 2)</a>
</li>
            
<li >
    <a href="../deleg/">delegation of admin duties</a>
</li>
            
<li >
    <a href="../gitweb-daemon/">gitweb and git-daemon</a>
</li>
            
<li >
    <a href="../mirroring/">mirroring</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">customise</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../non-core/">core and "non-core" gitolite</a>
</li>
            
<li >
    <a href="../dev-notes/">writing your own non-core code</a>
</li>
            
<li >
    <a href="../triggers/">gitolite triggers</a>
</li>
            
<li >
    <a href="../list-non-core/">list of non-core programs shipped with gitolite</a>
</li>
    </ul>
  </li>
                            
<li >
    <a href="../cookbook/">(quick! how do I...) the cookbook</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">HELP! <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../emergencies/">emergency!!</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">ssh</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../ssh/">ssh</a>
</li>
            
<li >
    <a href="../glssh/">how gitolite uses ssh</a>
</li>
            
<li >
    <a href="../sts/">ssh troubleshooting</a>
</li>
    </ul>
  </li>
                            
<li >
    <a href="../regex/">regular expressions</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">other docs <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../odds-and-ends/">miscellaneous features</a>
</li>
                            
<li >
    <a href="../namespaces/">using git namespaces</a>
</li>
                            
<li >
    <a href="../locking/">locking binary files</a>
</li>
                            
<li >
    <a href="../testing/">testing gitolite</a>
</li>
                            
<li >
    <a href="../package/">packaging gitolite</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">more about gitolite</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../files/">gitolite files & directories</a>
</li>
            
<li >
    <a href="../rc-33/">the 3.3 format rc file</a>
</li>
            
<li >
    <a href="../perf/">performance</a>
</li>
            
<li >
    <a href="../internals/">internals</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">contrib</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../contrib/ssh-and-http/">Using both ssh and http</a>
</li>
            
<li >
    <a href="../contrib/putty/">Putty and Msysgit</a>
</li>
            
<li >
    <a href="../contrib/sskm/">Self-service key management</a>
</li>
            
<li >
    <a href="../contrib/ukm/">User key management</a>
</li>
            
<li >
    <a href="../contrib/README-emacs/">Emacs major mode</a>
</li>
    </ul>
  </li>
                            
<li >
    <a href="../no-way/">no way!</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../install/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../http/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#fool-proof-step-by-step-install-and-setup">fool-proof, step-by-step, install and setup</a></li>
        <li class="main "><a href="#pre-requisites-etc">pre-requisites, etc</a></li>
        <li class="main "><a href="#assumptions">assumptions</a></li>
        <li class="main "><a href="#installation-tasks">installation tasks</a></li>
        <li class="main "><a href="#administration-tasks">administration tasks</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="fool-proof-step-by-step-install-and-setup">fool-proof, step-by-step, install and setup<a class="headerlink" href="#fool-proof-step-by-step-install-and-setup" title="Permanent link"></a></h1>
<hr />
<p>This page is useful if the normal <a class="wikilink" href="../install/">install</a> instructions did not work for
you.</p>
<h1 id="pre-requisites-etc">pre-requisites, etc<a class="headerlink" href="#pre-requisites-etc" title="Permanent link"></a></h1>
<p>These are the pre-requisites:</p>
<ul>
<li>Any Linux machine on which git has already been installed.</li>
<li>Probably any BSD or legacy system like Solaris will also work, but I have
    not tested them.<ul>
<li>I do not consider Apple devices to be Unix enough; it should work, but
    please do not ask me for help if it does not.</li>
</ul>
</li>
</ul>
<p>This page has several restrictions and constraints that seem unnecessary to
people who <strong>do</strong> understand ssh. That's the whole point -- I'm compensating
for lack of ssh knowledge by removing things that trip people up.</p>
<p>If even this page does not help you install gitolite, I probably cannot help
you.  Either you did not follow the instructions carefully <font
color="gray">(maybe some task has to be run on your workstation, but you ran
it on the server, or you ran something as root when it should be as the
hosting user, etc.)</font>, or your environment is far too different from
standard Unix, or you have some other problem.  In any case, it is not
something I can help with.  Sorry.</p>
<h1 id="assumptions">assumptions<a class="headerlink" href="#assumptions" title="Permanent link"></a></h1>
<ul>
<li>
<p>Your name is Ron.  Substitute accordingly in the instructions below.</p>
</li>
<li>
<p>You have a workstation.</p>
</li>
<li>
<p>You have a server called <code>server</code>.</p>
</li>
<li>
<p>You have root access on this server.</p>
</li>
</ul>
<h1 id="installation-tasks">installation tasks<a class="headerlink" href="#installation-tasks" title="Permanent link"></a></h1>
<ol>
<li>
<p>Create a new userid on the server, say <code>git</code>.  This will be the <strong>hosting
    user</strong>.  ("hosting user" means when you're done installing, your users
    will use URLs like <code>git@server:reponame</code> or <code>ssh://git@server/reponame</code>).</p>
<p><strong>Make sure this is a NEW userid</strong>.</p>
<p>If the name you want already exists, then:</p>
<ul>
<li>Log in as root.</li>
<li>If you have any data on that user's HOME directory save it somewhere
    else.</li>
<li>Delete the userid.</li>
<li>Completely wipe out (erase) the home directory of the user (since on
    most systems merely deleting the user does not remove the home
    directory).</li>
<li>Re-create the userid again.</li>
</ul>
</li>
<li>
<p>If you don't already have one, make yourself an ssh keypair <strong>on your
    workstation</strong>.</p>
<p>Do NOT add this public key to the authorised keys file on the newly
created hosting user!</p>
<p>Your ONLY access to the new (<code>git</code>) userid should be by logging onto the
server as root, then running <code>su - git</code>.</p>
</li>
<li>
<p>Now copy the pubkey from your workstation (<code>~/.ssh/id_rsa.pub</code>) to the
    server as <code>/tmp/ron.pub</code>.  (Your name is Ron, remember?)</p>
</li>
<li>
<p>Log on to the server as root.</p>
</li>
<li>
<p>Switch to the <code>git</code> user:</p>
<pre><code>su - git
</code></pre>
</li>
<li>
<p>Clone the gitolite source code</p>
<pre><code>git clone https://github.com/sitaramc/gitolite
</code></pre>
</li>
<li>
<p>Install it</p>
<pre><code>cd $HOME
mkdir -p bin
gitolite/install -to $HOME/bin
</code></pre>
</li>
<li>
<p>Set it up</p>
<pre><code>cd $HOME
$HOME/bin/gitolite setup -pk /tmp/ron.pub
</code></pre>
</li>
<li>
<p>Now go to your workstation and type in</p>
<pre><code>git ls-remote git@server:gitolite-admin
</code></pre>
<p>This should return something like</p>
<pre><code>9dd8aab60bac5e54ccf887a87b4f3d35c96b05e4    HEAD
9dd8aab60bac5e54ccf887a87b4f3d35c96b05e4    refs/heads/master
</code></pre>
<p>(do I have to mention that your SHAs will be different?)</p>
</li>
</ol>
<h1 id="administration-tasks">administration tasks<a class="headerlink" href="#administration-tasks" title="Permanent link"></a></h1>
<p>Most day-to-day administration is done by making changes to a clone of the
gitolite-admin repo and pushing.  (There are some things that are done by
editing <code>$HOME/.gitolite.rc</code> on the server, but those are too advanced for
this tutorial so we will ignore that).</p>
<ol>
<li>
<p>To start administering gitolite, clone the gitolite-admin repo:</p>
<pre><code>git clone git@server:gitolite-admin
</code></pre>
</li>
<li>
<p>Now go to the new directory this creates, and look around:</p>
<pre><code>cd gitolite-admin
ls -A
</code></pre>
<p>which gives you</p>
<pre><code>conf/  .git/  keydir/
</code></pre>
<p>Ignoring the ".git" and exploring further:</p>
<pre><code>ls -A conf keydir
</code></pre>
<p>which says:</p>
<pre><code>conf:
gitolite.conf

keydir:
ron.pub
</code></pre>
</li>
<li>
<p>Let's say you want to add your colleague Alice.  She has sent you her ssh
    public key by email (the file is called <code>id_rsa.pub</code>).  Save this file as
    /tmp/alice.pub, then do this:</p>
<pre><code># still in your gitolite-admin clone, from the previous step
cp /tmp/alice.pub keydir
git add keydir
git commit -m 'new user alice'
git push
</code></pre>
</li>
<li>
<p>Well, that might not be sufficient.  There aren't any new repos for alice
    to play with, yet.  So here's what you do: edit "conf/gitolite.conf" and
    add something like to the end:</p>
<pre><code>repo foo
    RW+     =   alice
    R       =   ron
</code></pre>
<p>Save the file, then <code>git add conf; git commit -m 'new repo foo'; git
push</code>.</p>
<p>This will automatically create a brand new repo called "foo" on the server, and
alice will be able to clone from it, or push anything to it.</p>
</li>
</ol></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script src="../js/base.js"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
