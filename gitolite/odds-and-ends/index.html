<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>miscellaneous features - Gitolite</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/gitolite.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">Gitolite</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="..">home</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">what/why <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../overview/">overview</a>
</li>
                            
<li >
    <a href="../concepts/">concepts, conventions, terminology</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">install and setup <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../quick_install/">(unix/ssh experts) quick install and setup</a>
</li>
                            
<li >
    <a href="../install/">normal ssh mode install and setup</a>
</li>
                            
<li >
    <a href="../fool_proof_setup/">(if all else fails) fool-proof, step-by-step, install and setup</a>
</li>
                            
<li >
    <a href="../http/">HTTP mode install</a>
</li>
                            
<li >
    <a href="../migr/">migrating from v2</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">use <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
  <li class="dropdown-submenu">
    <a href="#">basic</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../basic-admin/">basic administration</a>
</li>
            
<li >
    <a href="../conf/">the "conf" file (part 1)</a>
</li>
            
<li >
    <a href="../conf-2/">the "conf" file (part 2)</a>
</li>
            
<li >
    <a href="../rc/">the "rc" file</a>
</li>
            
<li >
    <a href="../user/">your users' view</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">advanced</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../git-config/">setting git-config values</a>
</li>
            
<li >
    <a href="../options/">gitolite options</a>
</li>
            
<li >
    <a href="../wild/">ad hoc user-created ("wild") repos</a>
</li>
            
<li >
    <a href="../vref/">virtual refs (part 1)</a>
</li>
            
<li >
    <a href="../vref-2/">virtual refs (part 2)</a>
</li>
            
<li >
    <a href="../deleg/">delegation of admin duties</a>
</li>
            
<li >
    <a href="../gitweb-daemon/">gitweb and git-daemon</a>
</li>
            
<li >
    <a href="../mirroring/">mirroring</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">customise</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../non-core/">core and "non-core" gitolite</a>
</li>
            
<li >
    <a href="../dev-notes/">writing your own non-core code</a>
</li>
            
<li >
    <a href="../triggers/">gitolite triggers</a>
</li>
            
<li >
    <a href="../list-non-core/">list of non-core programs shipped with gitolite</a>
</li>
    </ul>
  </li>
                            
<li >
    <a href="../cookbook/">(quick! how do I...) the cookbook</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">HELP! <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../emergencies/">emergency!!</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">ssh</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../ssh/">ssh</a>
</li>
            
<li >
    <a href="../glssh/">how gitolite uses ssh</a>
</li>
            
<li >
    <a href="../sts/">ssh troubleshooting</a>
</li>
    </ul>
  </li>
                            
<li >
    <a href="../regex/">regular expressions</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">other docs <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li class="active">
    <a href="./">miscellaneous features</a>
</li>
                            
<li >
    <a href="../namespaces/">using git namespaces</a>
</li>
                            
<li >
    <a href="../locking/">locking binary files</a>
</li>
                            
<li >
    <a href="../testing/">testing gitolite</a>
</li>
                            
<li >
    <a href="../package/">packaging gitolite</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">more about gitolite</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../files/">gitolite files & directories</a>
</li>
            
<li >
    <a href="../rc-33/">the 3.3 format rc file</a>
</li>
            
<li >
    <a href="../perf/">performance</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">contrib</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../contrib/ssh-and-http/">Using both ssh and http</a>
</li>
            
<li >
    <a href="../contrib/putty/">Putty and Msysgit</a>
</li>
            
<li >
    <a href="../contrib/sskm/">Self-service key management</a>
</li>
            
<li >
    <a href="../contrib/ukm/">User key management</a>
</li>
            
<li >
    <a href="../contrib/README-emacs/">Emacs major mode</a>
</li>
    </ul>
  </li>
                            
<li >
    <a href="../no-way/">no way!</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../regex/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../namespaces/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#miscellaneous-features">miscellaneous features</a></li>
        <li class="main "><a href="#disabling-pushes-to-take-backups">disabling pushes to take backups</a></li>
        <li class="main "><a href="#putting-repositories-and-gitolite-elsewhere">putting 'repositories' and '.gitolite' elsewhere</a></li>
        <li class="main "><a href="#using-pubkeys-obtained-from-elsewhere">using pubkeys obtained from elsewhere</a></li>
        <li class="main "><a href="#giving-users-their-own-repos">giving users their own repos</a></li>
        <li class="main "><a href="#administering-gitolite-directly-on-the-server">administering gitolite directly on the server</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="miscellaneous-features">miscellaneous features<a class="headerlink" href="#miscellaneous-features" title="Permanent link"></a></h1>
<hr />
<p>This page has a bunch of features that didn't seem to fit anywhere.</p>
<h1 id="disabling-pushes-to-take-backups">disabling pushes to take backups<a class="headerlink" href="#disabling-pushes-to-take-backups" title="Permanent link"></a></h1>
<p>The <code>writable</code> command allows you to disable pushes to all repos or just the
named repo, in order to do file-system level things to the repo directory that
require it not to change, like using normal backup software.</p>
<p>Run <code>gitolite writable -h</code> for more info.</p>
<h1 id="putting-repositories-and-gitolite-elsewhere">putting 'repositories' and '.gitolite' elsewhere<a class="headerlink" href="#putting-repositories-and-gitolite-elsewhere" title="Permanent link"></a></h1>
<p>Gitolite insists that the "repositories" and ".gitolite" directories be in
<code>$HOME</code>.  If you want them somewhere else:</p>
<ul>
<li>do the install as normal,</li>
<li><em>then</em> move those directories to wherever you want and replace them with
    symlinks pointing to the new location.</li>
</ul>
<h1 id="using-pubkeys-obtained-from-elsewhere">using pubkeys obtained from elsewhere<a class="headerlink" href="#using-pubkeys-obtained-from-elsewhere" title="Permanent link"></a></h1>
<p>If you're not managing keys via the gitolite-admin repo, but getting them from
somewhere else, you'll want to periodically "update" the keys.</p>
<p>To do that, first edit your rc file and add something like this:</p>
<pre><code>SSH_AUTHKEYS                =&gt;
    [
        'post-compile/ssh-authkeys',
    ],
</code></pre>
<p>Then write a script that</p>
<ul>
<li>gets all the keys and dumps them into <code>$HOME/.gitolite/keydir</code> (or into a
    subdirectory of it), and</li>
<li>runs <code>gitolite trigger SSH_AUTHKEYS</code>.</li>
</ul>
<p>Run this from cron or however you want.</p>
<h1 id="giving-users-their-own-repos">giving users their own repos<a class="headerlink" href="#giving-users-their-own-repos" title="Permanent link"></a></h1>
<p>(Please see <a href="../wild">this</a> for background on the ideas in this section).</p>
<p>It's very easy to give users their own set of repos to create, with the
username at the top level.  The simplest setup is:</p>
<pre style="color: #ffffff; background-color: #000000;">
<span class="Type">repo </span><span class="PreProc">CREATOR</span>/..*
<span class="Statement">    C</span><span class="Constant">   </span>=   <span class="Identifier">@all</span>
<span class="Statement">    RW+</span><span class="Constant"> </span>=   <span class="PreProc">CREATOR</span>
<span class="Statement">    RW</span><span class="Constant">  </span>=   <span class="PreProc">WRITERS</span>
<span class="Statement">    R</span><span class="Constant">   </span>=   <span class="PreProc">READERS</span>
</pre>

<p>Now users can create any repo under their own name simply by cloning it or
pushing to it, then use the <a href="../user/#setget-additional-permissions-for-repos-you-created">perms</a> command to add other users to their
WRITERS and READERS lists.</p>
<p>Of course you can get much more creative if you add a few more <a href="../wild/#roles">roles</a>.</p>
<p><font color="gray">(I prefer using some prefix, say "u", as in
<code>repo u/CREATOR/..*</code>.  This helps to keep user-created repos separate, and
avoid name clashes in some far-fetched scenarios).</font></p>
<h1 id="administering-gitolite-directly-on-the-server">administering gitolite directly on the server<a class="headerlink" href="#administering-gitolite-directly-on-the-server" title="Permanent link"></a></h1>
<p>The main use of managing gitolite via the admin repo is that you get to
version control the access rules.  But for large sites, there's another use:
you can share the admin load with more people, <strong>without</strong> having to give all
of them shell access on the server.</p>
<p>However, people who use puppet and similar systems already have a conf
versioning and management system.  And they'd like to continue to use that to
manage gitolite repos and users, rather than be forced to do it through the
gitolite-admin repo.</p>
<p>Such sites don't really need the admin repo at all, so here's how to get rid
of it and run things directly on the server (which you can script into your
puppet or similar software quite easily).</p>
<p>First the one-time stuff:</p>
<ul>
<li>
<p><a class="wikilink" href="../install/">install</a> the software as normal</p>
</li>
<li>
<p>run <code>gitolite setup -a dummy</code> instead of the normal <a href="../install/#setup">setup</a>
    command</p>
</li>
<li>
<p>delete (or move away) <code>~/repositories/gitolite-admin.git</code></p>
</li>
<li>
<p>edit <code>~/.gitolite/conf/gitolite.conf</code> and remove the gitolite-admin repo
    and its access line.</p>
</li>
<li>
<p><code>mkdir ~/.gitolite/keydir</code> (because "setup -a" does not create it, but you
    will need it later to add keys).</p>
</li>
<li>
<p>run <code>gitolite compile; gitolite trigger POST_COMPILE</code></p>
</li>
</ul>
<p>To manage gitolite, you can directly edit files in <code>~/.gitolite</code> (or cause
puppet to place files there), and then run the commands in the last step
above.  For example:</p>
<ul>
<li>copy someone's pubkey file to <code>~/.gitolite/keydir</code></li>
<li>edit <code>~/.gitolite/conf/gitolite.conf</code> and add a repo or three, giving
    access to some user(s)</li>
<li>run <code>gitolite compile; gitolite trigger POST_COMPILE</code></li>
</ul>
<p>That's it.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
