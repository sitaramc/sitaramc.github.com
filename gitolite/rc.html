<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>the &quot;rc&quot; file ($HOME/.gitolite.rc)</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style>
      body        { background: #fff; text-color: #000; margin-left:  40px;   font-size:  0.9em;  font-family: arial; }
  
      code        { font-size:    1.1em;  background:  #ddf; text-color: #000; }
      pre         { margin-left:  2em;    background:  #ddf; text-color: #000; }
      pre code    { font-size:    1.1em;  background:  #ddf; text-color: #000; }
  
      td          { vertical-align: top }
  
      .red        { color: red }
      .blue       { color: blue }
      .green      { color: green }
      .gray       { color: gray }
      .pink       { color: pink }
  
      .box        { background-color:#e0e0e0 }
      .bg-red     { background-color:#ffe0e0 }
      .bg-green   { background-color:#e0ffe0 }
      .bg-blue    { background-color:#e0e0ff }
  
      /* couldn't resist the name! */
      .wd40       { width: 40% !important }
  
      .box-l      { float: left;  padding: 0px 0.5em; background-color: #e0e0e0; width:25%; margin-right: 4px; }
      .box-r      { float: right; padding: 0px 0.5em; background-color: #e0e0e0; width:25%; margin-left:  4px; }
  
      .fl-l       { float: left;  padding: 0px 0.5em;                                       margin-right: 4px; }
      .fl-r       { float: right; padding: 0px 0.5em;                                       margin-left:  4px; }
  
      .sidebar {
          margin-left: 4px;
          width: 25%;
          float: right;
          border: 4px solid #fff;
      }
  
  </style>
  <style>
      h1          { background: #ffb; text-color: #000; margin-left: -30px;   border-top:    5px  solid #ccc; }
      h2          { background: #ffb; text-color: #000; margin-left: -20px;   border-top:    3px  solid #ddd; }
      h3          { background: #ffb; text-color: #000; margin-left: -10px; }
      h4          { background: #ffb; text-color: #000; }
  </style>
</head>
<body>
<!--
    generated by gvim then munged a fair bit.  The following command
        vim -E -c "TOhtml" -c "w" -c 'qa!' \-\- conf/gitolite.conf
    may or may not produce the same thing
-->

<style type="text/css">
<!--
.WarningMsg { color: #ff0000; }
.Constant { color: #ffa0a0; }
.Statement { color: #ffff60; font-weight: bold; }
.PreProc { color: #ff80ff; }
.LineNr { color: #ffff00; }
.Comment { color: #80a0ff; }
.Type { color: #60ff60; font-weight: bold; }
.Special { color: #ffa500; }
.Identifier { color: #40ffff; }
.Error { color: #ffffff; background-color: #ff0000; padding-bottom: 1px; }
.Todo { color: #0000ff; background-color: #ffff00; padding-bottom: 1px; }
-->
</style>
<div id="header">
<h1 class="title">the &quot;rc&quot; file (<code>$HOME/.gitolite.rc</code>)</h1>
</div>
<div id="TOC">
<ul>
<li><a href="#structure-of-the-rc-file"><span class="toc-section-number">1</span> structure of the rc file</a></li>
<li><a href="#specific-variables"><span class="toc-section-number">2</span> specific variables</a></li>
<li><a href="#privesc"><span class="toc-section-number">3</span> security note: gitolite admin and shell access</a></li>
<li><a href="#appendix-a-upgrading-the-rc-file"><span class="toc-section-number">4</span> appendix A: upgrading the rc file</a></li>
</ul>
</div>
<script type="text/javascript">
<!--
    function hide_show(id) {
        var e = document.getElementById(id);
        if(e == null)
            return;
        if(e.style.display != 'none')
            e.style.display = 'none';
        else
            e.style.display = 'block';
    }

    window.onload = function() {
        var t = document.getElementById('TOC');
        var sbt = document.getElementById('SBTOC');
        var h = '<div id="PTOC">'
        var h2 = '<p><strong><span class="red">Page TOC</span></strong></p>'
        var h3 = '</div>'
        var h4 = '<div id="GTOC">'
        var h5 = '</div>'
        var hst = '<div style="background: white; color: green; border: 2px solid green"><center><font size=-1><strong>Hide/Show Table of Contents</strong><br />'
        var pd = '<a href="#" onclick="hide_show(\'PTOC\');">Page TOC</a> | '
        var gt = '<a href="#" onclick="hide_show(\'GTOC\');">Gitolite TOC</a></font></center></div>'

        if(t == null)
            sbt.innerHTML = hst + gt + h4 + sbt.innerHTML + h5;
        else {
            sbt.innerHTML = hst + pd + gt + h + h2 + t.innerHTML + h3 + h4 + sbt.innerHTML + h5;
            t.style.display = 'none';   // hide the TOC that pandoc placed
        }
    }
-->
</script>

<style>
    #PTOC ul {
        list-style: none;
        margin-left: 0;
        padding-left: 2em;
        text-indent: -2em;
        padding-bottom: 2em;
    }
    #PTOC ul li {
        padding-bottom: 10px;
    }
    #PTOC ul li ul {
        padding-bottom: 0px;
    }
    #PTOC ul li ul li {
        padding-bottom: 0px;
    }

    .sidebar-toc a:hover {
        background-color: white;
    }

    .sidebar-toc {
        margin-left: 4px;
        width: 25%;
        float: right;
        color: gray;
        background: lightgray;
        border: 4px solid #fff;
        font-size: 0.90em;
    }

    .sidebar-toc ul {
        padding-left: 2em;
    }

</style>

<div id="SBTOC" class="sidebar-toc">

<p><strong><span class="red">Gitolite TOC</span></strong></p>
<hr />
<center>
<span class="red"><strong>Background</strong></span>
</center>

<hr />
<p><a href="index.html">Main page</a></p>
<ul>
<li><a href="index.html#dl">download</a></li>
<li><a href="index.html#rtfm">documentation</a>
<ul>
<li><a href="gitolite.html"><strong>all-in-one</strong></a> page</li>
</ul></li>
<li><a href="index.html#trouble"><strong>troubleshooting</strong></a></li>
<li><a href="index.html#contact"><strong>contact and support</strong></a></li>
<li><a href="index.html#license">license</a></li>
</ul>
<p><a href="overview.html">Overview</a></p>
<ul>
<li>what is Gitolite?</li>
<li>why might you need it?</li>
<li>how does it work?</li>
<li>who uses it?</li>
</ul>
<p><a href="concepts.html">Concepts, conventions, and terminology</a></p>
<ul>
<li>authentication and authorisation</li>
<li>ssh mode and http mode</li>
<li>the &quot;hosting user&quot;</li>
<li>the &quot;logical repo name&quot;</li>
<li>the special gitolite-admin repo</li>
</ul>
<p><a href="req.html">Before you start...</a></p>
<ul>
<li>your skills</li>
<li>your server</li>
<li>your and your users' clients</li>
<li><strong>cautions and caveats</strong></li>
<li><a href="req.html#trying">trying</a> out gitolite safely</li>
</ul>
<hr />
<center>
<span class="red"><strong>Basics</strong></span>
</center>

<hr />
<p><a href="install.html">install and setup</a></p>
<ul>
<li><a href="install.html#qi">quick install+setup</a> (for experts)</li>
<li>the long way around</li>
<li><a href="install.html#upgrading">upgrading</a></li>
<li><a href="install.html#moving">moving servers</a></li>
</ul>
<p><a href="basic-admin.html">Basic Administration</a></p>
<ul>
<li>clone the gitolite-admin repo</li>
<li>add/remove users</li>
<li>add/remove/rename repos</li>
<li>bringing existing repos into gitolite</li>
</ul>
<p><a href="conf.html">The conf file (<code>conf/gitolite.conf</code>)</a></p>
<ul>
<li>basic <a href="conf.html#syntax">syntax</a></li>
<li><a href="conf.html#include">include</a> files</li>
<li><a href="conf.html#groups">group definitions</a></li>
<li><a href="conf.html#rules"><strong><span class="red">access rules</span></strong></a></li>
</ul>
<p><a href="rc.html">the rc file (<code>~/.gitolite.rc</code>)</a></p>
<p><a href="user.html">Your users' view</a> of gitolite</p>
<p>Troubleshooting</p>
<ul>
<li>help for <a href="emergencies.html">emergencies</a></li>
<li>the <a href="ips.html">fool-proof install guide</a></li>
<li>the gitolite &quot;<a href="cookbook.html">cookbook</a>&quot;</li>
</ul>
<hr />
<center>
<span class="red"><strong>Advanced</strong></span>
</center>

<hr />
<p>Advanced &quot;conf file&quot; use</p>
<ul>
<li>specifying <a href="git-config.html">git-config</a> keys and values</li>
<li>gitolite <a href="options.html">options</a></li>
<li><a href="wild.html"><strong>wild repos</strong></a> (user created repos)</li>
<li><a href="vref.html">virtual refs</a></li>
<li><a href="deleg.html">delegation</a> of admin duties</li>
<li><a href="gitweb-daemon.html">gitweb and git-daemon</a></li>
</ul>
<p>Special features/setups</p>
<ul>
<li><strong><a href="mirroring.html">mirroring</a></strong></li>
<li><a href="http.html">http</a> mode</li>
<li>using a <a href="cache.html">cache</a></li>
<li>(<a href="namespaces.html">namespaces</a>)</li>
<li><a href="locking.html">locking</a> binary files</li>
<li><a href="package.html">packaging</a> gitolite</li>
</ul>
<p>Customising gitolite</p>
<ul>
<li>core and <a href="non-core.html">non-core</a> gitolite</li>
<li><a href="dev-notes.html">writing your own</a> non-core programs</li>
<li>gitolite <a href="triggers.html">triggers</a></li>
<li><a href="list-non-core.html">list of non-core programs</a> shipped with gitolite</li>
</ul>
<hr />
<center>
<span class="red"><strong>Extras</strong></span>
</center>

<hr />
<p><a href="odds-and-ends.html">Odds and Ends</a></p>
<ul>
<li><a href="odds-and-ends.html#writable">disabling pushes</a> to take backups</li>
<li><a href="odds-and-ends.html#elsewhere">putting 'repositories' and '.gitolite' elsewhere</a></li>
<li><a href="odds-and-ends.html#keysonly">using pubkeys obtained from elsewhere</a></li>
<li><a href="odds-and-ends.html#gh">giving users their own repos</a></li>
<li><a href="odds-and-ends.html#server-side-admin">administering gitolite directly on the server</a></li>
</ul>
<p>Additional information/discussion</p>
<ul>
<li><a href="ssh.html">all about ssh and gitolite</a></li>
<li>Running the <a href="testing.html">test suite</a></li>
<li><a href="files.html">gitolite files and directories</a></li>
<li><a href="perf.html">gitolite performance</a></li>
<li><a href="migr.html">Migration</a></li>
<li><a href="http://sitaramc.github.com/gitolite/g2/master-toc.html">documentation for gitolite v2</a></li>
<li><a href="regex.html">regular expressions</a></li>
<li><a href="no-way.html">no way!</a></li>
</ul>
<hr />
<center>
<span class="red"><strong>Contributed docs</strong></span>
</center>

<hr />
<p>Contributed software, tools, and documentation</p>
<ul>
<li><a href="ssh-and-http.html">combining ssh and http mode</a></li>
<li><a href="putty.html">putty and msysgit</a></li>
<li><a href="sskm.html">changing keys -- self service key management</a></li>
<li><a href="ukm.html">user key management</a></li>
<li><a href="README-emacs.html">emacs</a> &quot;major mode&quot;</li>
</ul>
</div>

<p><strong>IMPORTANT</strong>: if you have a v3.0-v3.3 rc file it is documented <a href="rc-33.html">here</a>, and it will still work. Please see appendix A below for details.</p>
<p><span class="gray"><strong>If you're migrating from v2</strong>, there are some settings that MUST be dealt with <strong>before</strong> running <code>gitolite setup</code>; please read the <a href="migr.html">migration</a> page and linked pages, and especially the one on &quot;presetting the rc file&quot;.</span></p>
<hr />
<p><span class="box-r">Note: This page has several <a href="index.html#fr">forward references</a>!</span></p>
<p>The rc file is designed to be the only thing unique to your site for most setups.</p>
<p>The rc file is well commented. Please look at the <code>~/.gitolite.rc</code> file that gets installed when you setup gitolite. <strong>You can always get a default copy for your current version by running <code>gitolite print-default-rc</code>.</strong> (Please see appendix A for upgrade instructions.)</p>
<h1 id="structure-of-the-rc-file"><span class="header-section-number">1</span> structure of the rc file</h1>
<p>The rc file is perl code, but you do NOT need to know perl to edit it. Just mind the commas, use single quotes unless you know what you're doing, and make sure the brackets and braces stay matched up!</p>
<p>As you can see there are 3 types of variables in it:</p>
<ul>
<li>A lot of simple variables (like <code>UMASK</code>, <code>GIT_CONFIG_KEYS</code>, etc.).</li>
<li>A hash or two (like <code>ROLES</code>).</li>
<li>And one large list of features to be enabled (<code>ENABLE</code>).</li>
</ul>
<p>This page documents only some of them; for most of them it's best to look in the actual rc file or in each of their individual documentation files around; start with <a href="non-core.html">&quot;non-core&quot; gitolite</a>. If a setting is used by a command then running that command with '-h' may give you additional information.</p>
<h1 id="specific-variables"><span class="header-section-number">2</span> specific variables</h1>
<ul>
<li><p><code>$UMASK</code>, octal, default <code>0077</code></p>
<p>The default UMASK that gitolite uses gives <code>rwx------</code> permissions to all the repos and their contents. People who want to run gitweb (or cgit, redmine, etc) realise that this will not do.</p>
<p>The correct way to deal with this is to give this variable a value like <code>0027</code> (note the syntax: the leading 0 is required), and then make the user running the webserver (apache, www-data, whatever) a member of the 'git' group.</p>
<p>If you've already installed gitolite then existing files will have to be fixed up manually (for a umask or 0027, that would be <code>chmod -R g+rX</code>). This is because umask only affects permissions on newly created files, not existing ones.</p></li>
<li><p><code>$GIT_CONFIG_KEYS</code>, string, default empty</p>
<p><span class="box-r">See the <a href="#privesc">security note</a> at the end of this page for why we do this.</span></p>
<p>This setting allows the repo admin to define acceptable gitconfig keys.</p>
<p>Gitolite allows you to set git config values using the &quot;config&quot; keyword; see <a href="git-config.html">here</a> for details and syntax.</p>
<p>You have 3 choices. By default <code>$GIT_CONFIG_KEYS</code> is left empty, which completely disables this feature (meaning you cannot set git configs via the repo config).</p>
<p>The second choice is to give it a space separated list of settings you consider safe. (These are actually treated as a set of <a href="regex.html">regular expressions</a>, and any one of them must match).</p>
<p>For example:</p>
<pre><code>$GIT_CONFIG_KEYS = 'core\.logAllRefUpdates core\..*compression';</code></pre>
<p>Each regex should match the <em>whole</em> key (in other words, there is an implicit <code>^</code> at the start of each regex, and a <code>$</code> at the end).</p>
<p>The third choice (which you may have guessed already if you're familiar with regular expressions) is to allow anything and everything: <code>$GIT_CONFIG_KEYS = '.*';</code></p></li>
<li><p><code>ROLES</code>, hash, default keys 'READERS' and 'WRITERS'</p>
<p>This specifies the role names allowed to be used by users running the <a href="user.html#perms">perms</a> command. The <a href="wild.html">wild</a> repos doc has more info on roles.</p></li>
<li><p><code>OWNER_ROLENAME</code>, string, default undef</p>
<p>(requires v3.5 or later)</p>
<p>By default, permissions on a wild repo can only be set by the <em>creator</em> of the repo (using the <a href="user.html#perms">perms</a> command). But some sites want to allow other people to do this as well.</p>
<p>To enable this behaviour, the server admin must first set this variable to some string, say 'OWNERS'. (He must also add 'OWNERS' to the ROLES hash described in the previous bullet).</p>
<p>The creator of the repo can then add other users to the OWNERS role using the <a href="user.html#perms">perms</a> command.</p>
<p>The <a href="user.html#perms">perms</a> command, the new &quot;owns&quot; command, and possibly other commands in future, will then give these users the same privileges that they give to the creator of the repo.</p>
<p>(Also see the full documentation on <a href="wild.html#roles">roles</a>).</p></li>
<li><p><code>LOCAL_CODE</code>, string</p>
<p>This is described in more detail <a href="non-core.html#localcode">here</a>. Please be aware <strong>this must be a FULL path</strong>, not a relative path.</p></li>
</ul>
<h1 id="privesc"><span class="header-section-number">3</span> security note: gitolite admin and shell access</h1>
<p><span class="box-r">If you <em>must</em> revision control it, you can. Just add it to your admin repo, push the change, then replace <code>~/.gitolite.rc</code> with a symlink to <code>~/.gitolite/.gitolite.rc</code>.</span></p>
<p>People sometimes ask why this file is also not revision controlled. Here's why.</p>
<p>Gitolite maintains a clear distinction between</p>
<ul>
<li>people who can push to the gitolite-admin repo, and</li>
<li>people who can get a shell or run arbitrary commands on the server.</li>
</ul>
<p>This may not matter to many (small) sites, but in large installations, the former is often a much larger set of people that you really don't want to give shell access to.</p>
<p>Therefore, gitolite tries very hard to make sure that people in the first set are not allowed to do anything that gets them into the second set.</p>
<h1 id="appendix-a-upgrading-the-rc-file"><span class="header-section-number">4</span> appendix A: upgrading the rc file</h1>
<p>First, note that upgrading the rc file is always <em>optional</em>. However, it may help if you want to use any of the new features available in later gitolite releases, in the sense that the lines you need to add may already be present (commented out) in the rc file, so you just need to uncomment them instead of typing them in yourself.</p>
<p>If you have a v3.0-v3.3 rc file it is documented <a href="rc-33.html">here</a>, and it will still work. In fact internally the v3.4 rc file data gets converted to the v3.3 format. There's a simple program to help you upgrade a v3.3 (or prior) rc file (in <span class="gray">v3.6.1+</span>, see contrib/utils/rc-format-v3.4), but it has probably not seen too much testing; please tread carefully and report any problems you find.</p>
<p>Upgrading from any v3.4+ rc file to any later gitolite is fairly easy, though still manual. One useful aid is that, as of v3.6.4, you can run <code>gitolite query-rc -d</code> to dump the entire rc structure to STDOUT. <strong>This only requires that gitolite be v3.6.4+; your rc file can still be the old one.</strong> You can use this to confirm you did not miss something during the manual rc upgrade.</p>
<ul>
<li><p>dump the current rc by running <code>gitolite query-rc -d &gt; old.dump</code> (assuming you upgraded to v3.6.4 or higher)</p></li>
<li><p>save your old rc file: `mv ~/.gitolite.rc ~/old.gitolite.rc</p></li>
<li><p>get a &quot;default&quot; rc for your current gitolite by running</p>
<pre><code>gitolite print-default-rc &gt; ~/.gitolite.rc</code></pre></li>
<li><p>use your favourite diff-ing editor on the old and the new files and figure out what to carry over from the old rc file to the new one.</p>
<pre><code>vimdiff ~/old.gitolite.rc ~/.gitolite.rc
# maybe kdiff3 or whatever</code></pre>
<p>This is the tricky part of course! Watch out for configs that got <em>moved</em> around, or in some cases removed completely, not just new config items.</p></li>
<li><p>dump the new rc by running <code>gitolite query-rc -d &gt; new.dump</code></p></li>
<li><p>compare the 2 rc dumps to make sure you've got everything covered.</p></li>
</ul>
</body>
</html>
